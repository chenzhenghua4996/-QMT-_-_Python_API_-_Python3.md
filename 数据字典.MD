## 概述

欢迎使用迅投数据服务！本数据字典为您在使用过程中提供相关指导，您可以通过搜索相关数据，找到对应的`描述`、`用法`、`参数`、`返回`、`示例`。

如果您是 QMT 基础行情用户，遇到相关问题的时候，请查阅[VIP 行情用户优势对比](https://dict.thinktrader.net/dictionary/?id=5M2071#vip-%E8%A1%8C%E6%83%85%E7%94%A8%E6%88%B7%E4%BC%98%E5%8A%BF%E5%AF%B9%E6%AF%94)，找到对应问题描述，如没有对应内容，可联系客服反馈。

如果您想成为 VIP 行情用户，请查阅[VIP 行情用户-购买流程](https://dict.thinktrader.net/dictionary/?id=5M2071#%E8%B4%AD%E4%B9%B0%E6%B5%81%E7%A8%8B)，进行购买。

如果您已经是 VIP 行情用户，请查阅[VIP 行情用户-使用流程](https://dict.thinktrader.net/dictionary/?id=5M2071#%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B)，学习使用。

其他问题，欢迎您联系客服反馈。

## VIP 行情用户优势对比

### 通用功能对比

| 数据类型                                                                                                                                                         | 券商版权限                      | 基础版权限                      | 投研版权限                                                                                                                        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------- | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------- |
| 仿真交易权限                                                                                                                                                       | 不支持                        | 支持所有品种：股票、期货、期权            | [支持所有品种：股票、期货、期权](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)           |
| Python交易权限                                                                                                                                                   | 支持                         | 支持                         | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| 图表交易权限                                                                                                                                                       | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| 直连期货交易                                                                                                                                                       | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| 高级 VBA、Python 函数                                                                                                                                             | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| 专属微信组工程师指导                                                                                                                                                   | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
|                                                                                                                                                              |                            |                            | **VIP行情权限**                                                                                                                  |
| 行情数量                                                                                                                                                         | 100 个限制                    | 100 个限制                    | [300个限制](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                    |
| 盘口档位                                                                                                                                                         | 最高 1 档                     | 仅最新价                       | [最高 5 档](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                    |
| 品种                                                                                                                                                           | 只支持股票                      | 只支持股票                      | [支持所有品种：股票、期货、期权](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)           |
| 下载数据-历史范围                                                                                                                                                    | 5m-1年<br>1m-1年<br>tick-1个月 | 5m-1年<br>1m-1年<br>tick-1个月 | [5m-3年<br>1m-3年<br>tick-1年](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94) |
| 下载数据-流速                                                                                                                                                      | 限制                         | 限制                         | [无限制](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                       |
| 期权                                                                                                                                                           | 不支持                        | 不支持                        | [需购买开通权限](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                   |
| 因子数据                                                                                                                                                         | 不支持                        | 不支持                        | [需购买开通权限](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                   |
| [北向、资金流、沪港通数据](http://dict.thinktrader.net/dictionary/stock.html#%E8%8E%B7%E5%8F%96%E8%82%A1%E7%A5%A8%E8%B5%84%E9%87%91%E6%B5%81%E5%90%91%E6%95%B0%E6%8D%AE) | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| [行业、商品指数行情数据](http://dict.thinktrader.net/dictionary/indexes.html#%E8%8E%B7%E5%8F%96%E6%8C%87%E6%95%B0%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)                  | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| [现货、仓单、席位数据](http://dict.thinktrader.net/dictionary/future.html#%E6%9C%9F%E8%B4%A7%E4%BB%93%E5%8D%95)                                                        | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| [可转债数据](http://dict.thinktrader.net/dictionary/bond.html#%E5%8F%AF%E8%BD%AC%E5%80%BA%E6%95%B0%E6%8D%AE)                                                      | 不支持                        | 不支持                        | [支持](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                        |
| [ETF申赎清单数据](http://dict.thinktrader.net/dictionary/floorfunds.html?id=7zqjlm#etf%E7%94%B3%E8%B5%8E%E6%B8%85%E5%8D%95)                                        | 不支持                        | 不支持                        | [需购买开通权限](https://dict.thinktrader.net/dictionary/#%E9%80%9A%E7%94%A8%E5%8A%9F%E8%83%BD%E5%AF%B9%E6%AF%94)                   |

### 行情站点对比

普通行情使用的行情站点与VIP行情也有区别，更换VIP行情站点，能够带来更好的行情体验，添加方式如下：![迅投数据服务_配置行情站点](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E9%85%8D%E7%BD%AE%E8%A1%8C%E6%83%85%E7%AB%99%E7%82%B9-2ff7ee2a.png)

#### VIP行情站点

| 地点        | 网址                         | 端口      |
| --------- | -------------------------- | ------- |
| VIP迅投绍兴电信 | `vipsxmd1.thinktrader.net` | `55310` |
| VIP迅投绍兴电信 | `vipsxmd2.thinktrader.net` | `55310` |
| VIP迅投郑州联通 | `ltzzmd2.thinktrader.net`  | `55300` |
| VIP迅投郑州联通 | `ltzzmd1.thinktrader.net`  | `55300` |
| VIP迅投郑州电信 | `dxzzmd1.thinktrader.net`  | `55300` |
| VIP迅投郑州电信 | `dxzzmd2.thinktrader.net`  | `55300` |

| 地点        | IP地址             | 端口      |
| --------- | ---------------- | ------- |
| VIP迅投绍兴电信 | `115.231.218.73` | `55310` |
| VIP迅投绍兴电信 | `115.231.218.79` | `55310` |
| VIP迅投郑州联通 | `42.228.16.211`  | `55300` |
| VIP迅投郑州联通 | `42.228.16.210`  | `55300` |
| VIP迅投郑州电信 | `36.99.48.20`    | `55300` |
| VIP迅投郑州电信 | `36.99.48.21`    | `55300` |

#### 普通行情站点

| 地点     | 网址                      | 端口      |
| ------ | ----------------------- | ------- |
| 迅投浦东电信 | `shmd1.thinktrader.net` | `55300` |
| 迅投浦东电信 | `shmd2.thinktrader.net` | `55300` |
| 迅投东莞电信 | `szmd1.thinktrader.net` | `55300` |
| 迅投东莞电信 | `szmd2.thinktrader.net` | `55300` |

| 地点     | IP地址             | 端口      |
| ------ | ---------------- | ------- |
| 迅投浦东电信 | `43.242.96.162`  | `55300` |
| 迅投浦东电信 | `43.242.96.164`  | `55300` |
| 迅投东莞电信 | `218.16.123.121` | `55300` |
| 迅投东莞电信 | `218.16.123.122` | `55300` |

## 如何成为 VIP 行情用户

### 购买流程

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E8%B4%AD%E4%B9%B0%E6%B5%81%E7%A8%8B-a48f3b53.png)

#### 步骤一：注册登录

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C-640215b7.png)在[迅投研官网](https://xuntou.net/#/signup)使用手机号注册你的投研账号。

提示

记录好你的密码，后续会很重要

#### 步骤二：购买权限

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E8%B4%AD%E4%B9%B0%E8%A1%8C%E6%83%85%E7%94%A8%E6%88%B7VIP-23b6c7d1.png)

登录你的投研账号，访问[投研服务页面](https://xuntou.net/#/productvip)，选择`行情用户 VIP`，并支付。

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E6%94%AF%E4%BB%98%E9%80%89%E9%A1%B9-3a5872db.jpg)

支付方式支持`微信支付`、`支付宝`以及`对公转账`，其中`对公转账`信息如下：

- 公司名：`成都睿智融科科技有限公司`
- 账户号：`4402235009000153959`
- 开户行：`中国工商银行成都高新城南支行`

#### 步骤三：查看权限

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E6%9D%83%E9%99%90%E6%97%B6%E9%95%BF%E6%9F%A5%E7%9C%8B-ffbb1b1e.png)支付成功后，你就可以在[个人中心](https://xuntou.net/#/userInfo)看到您的服务已经开启相应时长的使用权限

### 使用流程

#### 1.如何在券商 QMT 中使用

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E5%88%B8%E5%95%86QMT%E9%85%8D%E7%BD%AE%E8%A1%8C%E6%83%85%E7%94%A8%E6%88%B7VIP-9739b2c8.png)

1. 登录你的券商 QMT 后，点击行情，进入行情面板
2. 找到迅投行情主站（包括北京、上海、东莞等），点击`修改`
3. 在弹窗中将用户名和密码修改为自己的投研账号密码，点击确认
4. 点击`链接`，即可在券商 QMT 中使用行情用户 VIP 权限
5. 执行以上同样的操作，找到迅投资管行情，点击`修改`
6. 最后，点击右上角`全推行情`，在下拉框中选择`五档全推`

提示

1. 第五步，若不修改迅投资管行情的账号密码，不设置将无法收到五档全推
2. 第六步，若不修改全推行情，也无法收到五档全推

**操作演示**![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E5%88%B8%E5%95%86QMT_VIP%E8%A1%8C%E6%83%85%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE%E6%BC%94%E7%A4%BA-c4ab571c.gif)

#### 2.如何使用 Token

![](https://dict.thinktrader.net/assets/%E8%BF%85%E6%8A%95%E6%95%B0%E6%8D%AE%E6%9C%8D%E5%8A%A1_%E6%8E%A5%E5%8F%A3Token%E8%8E%B7%E5%8F%96-fd6f236e.png)

1. 在你的迅投研官网的[个人中心](https://xuntou.net/#/userInfo)，`迅投投研服务平台 - 用户中心 - 个人设置 - 接口 TOKEN` ，找到你的接口 TOKEN
2. 接口 TOKEN 一次生成一个，刷新后前一个 TOKEN 失效（刷新有间隔限制，请勿频繁刷新）
3. 接口 TOKEN 具体用法如下：

##### 下载指定 xtquant 包

提示

请提前下载指定 xtquant 包，

Windows:[下载链接](http://dict.thinktrader.net/nativeApi/download_xtquant.html) 或在cmd窗口中运行指令

```
pip install xtquant -i https://pypi.tuna.tsinghua.edu.cn/simple
```

##### 基础用法 - 获取数据

python返回值

```
# 导入 xtdatacenter 模块
from xtquant import xtdatacenter as xtdc  

'''  
设置用于登录行情服务的token，此接口应该先于 init_quote 调用

token可以从投研用户中心获取
https://xuntou.net/#/userInfo
'''  
xtdc.set_token('这里输入token')

'''  
设置数据存储根目录，此接口应该先于 init_quote 调用  
datacenter 启动后，会在 data_home_dir 目录下建立若干目录存储数据  
此接口不是必须调用，如果不设置，会使用默认路径
'''  
# xtdc.set_data_home_dir('data') 

'''
函数用法可通过以下方式查看：
'''
# print(help(xtdc.set_data_home_dir))  

'''  
初始化行情模块  
'''  
xtdc.init()

'''
初始化需要一定时间，完成后即可按照数据字典的对应引导使用
'''

# 导入 xtdata
from xtquant import xtdata  

# 获取交易日期
tdl = xtdata.get_trading_dates('SH')  
print(tdl[-10:])  

# 获取板块列表
sl = xtdata.get_stock_list_in_sector('沪深A股')  
print(sl[::100])  

# 输出平安银行的相关信息 
data = xtdata.get_instrument_detail("000001.SZ")  
print(data)

# 其他数据获取的方法请参考数据字典：http://dict.thinktrader.net/dictionary/stock.html  
```

##### 进阶用法 - 数据服务

当您已经实现基础用法，成功获取数据后，随即可能会有新的需求：

**如果我有多个策略，在不同进程中运行，都要获取数据，而 Token 只支持单点访问，该怎么办？**

我们同样提供数据服务，您可以在一个进程中启动数据服务，其他进程连接该数据服务，实现您想要的效果，具体演示如下：

**进程 1**

python返回值

```
    ### 进程1 启动xtdatacenter监听

    from xtquant import xtdatacenter as xtdc

    xtdc.set_token('这里输入token')

    print('xtdc.init')
    xtdc.init() # 初始化行情模块，加载合约数据，会需要大约十几秒的时间
    print('done')

    # 为其他进程的xtdata提供服务时启动server，单进程使用不需要
    print('xtdc.listen')
    listen_addr = xtdc.listen(port = 58610)
    print(f'done, listen_addr:{listen_addr}')

    from xtquant import xtdata
    print('running')
    xtdata.run() #循环，维持程序运行
```

**进程 2**

python返回值

```
from xtquant import xtdata
'''
连接数据服务指定的端口
'''
xtdata.connect(port=58610)


# 以下即可正常执行获取数据的操作
tdl = xtdata.get_trading_dates('SH')
print(tdl[-10:])

sl = xtdata.get_stock_list_in_sector('沪深A股')
print(sl[::100])

# 结合数据字典：http://dict.thinktrader.net/dictionary/stock.html

# 输出平安银行信息的中文名称
data = xtdata.get_instrument_detail("000001.SZ")
print(data)
```

提示

更进一步，您还可以在一台服务器启动数据服务，其他服务器连接过去请求数据。注意：一个数据服务最多支持 5 个接入，如需更多，请联系客服购买。

遇到问题，请参考常见问题[Token 使用相关](https://dict.thinktrader.net/dictionary/question_answer.html#token-%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%85%B3)

#### 3.如何在投研端中使用

1. 购买投研端的用户默认拥有行情用户 VIP 权限，且已经自动配置好
2. 投研端的用户可以在券商 QMT 中使用，具体参考[如何在券商 QMT 中使用](https://dict.thinktrader.net/dictionary/?id=5M2071#_1-%E5%A6%82%E4%BD%95%E5%9C%A8%E5%88%B8%E5%95%86-qmt-%E4%B8%AD%E4%BD%BF%E7%94%A8)
3. 投研端的用户同样可以在后台找到接口 TOKEN，具体参考[如何使用 Token](https://dict.thinktrader.net/dictionary/?id=5M2071#_2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-token)

## 更新日志

### 2023.11

#### 2023.11.01

- 更新 [快速开始](https://dict.thinktrader.net/dictionary/?id=5M2071)
- 补充可转债数据字段
- 优化部分描述

#### 2023.11.21

- 更新K线全推示例
- 更新界面操作-独立python进程
- 新添加get_trade_detail_data - `POSITION_STATISTICS`结构

#### 2023.11.22

- 增加常见pandas问题及处理方案

### 2023.12

#### 2023.12.07

- 新增历史涨跌停价数据
- 新增历史ST数据下载方式
- 新增获取历史期权合约方法
- 更新财务数据获取方式
- 修正 get_etf_info 示例

#### 2023.12.08

- 优化文档显示内容

#### 2023.12.14

- 新增 TOP10HOLDER/TOP10FLOWHOLDER - 十大股东/十大流通股东
- 新增 SHAREHOLDER - 股东数

#### 2023.12.20

- 修复文档描述错误

#### 2023.12.25

- 增加get_etf_info字段描述
- 优化VIP行情对比

#### 2024.01.05

- 增加回测复权方式说明
- 增加openInt变化状态说明
- 优化文档显示内容

上次更新: 2025/8/21 11:21:44

邀请注册送VIP优惠券

分享下方的内容给好友、QQ群、微信群,好友注册您即可获得VIP优惠券

玩转qmt,上迅投qmt知识库

## 获取股票概况

包含股票的上市时间、退市时间、代码、名称、是否是ST等。

### 获取合约基础信息数据

该信息每交易日9点更新

#### 内置Python

提示

旧版本客户端中，函数名为ContextInfo.get_instrumentdetail

**调用方法**

内置python

```
ContextInfo.get_instrument_detail(stockcode)
```

**释义**

根据代码获取合约详细信息

**参数**

| 字段名         | 数据类型     | 解释                         |
| ----------- | -------- | -------------------------- |
| `stockcode` | `string` | 标的名称，必须是 'stock.market' 形式 |

**返回值**

根据stockcode返回一个dict。该字典数据key值有：

| 名称               | 类型     | 描述                                   |
| ---------------- | ------ | ------------------------------------ |
| ExchangeID       | string | 合约市场代码                               |
| InstrumentID     | string | 合约代码                                 |
| InstrumentName   | string | 合约名称                                 |
| ProductID        | string | 合约的品种ID(期货)                          |
| ProductName      | string | 合约的品种名称(期货)                          |
| ProductType      | int    | 合约的类型, 默认-1,枚举值可参考下方说明               |
| ExchangeCode     | string | 交易所代码                                |
| UniCode          | string | 统一规则代码                               |
| CreateDate       | str    | 创建日期                                 |
| OpenDate         | str    | 上市日期（特殊值情况见表末）                       |
| ExpireDate       | int    | 退市日或者到期日（特殊值情况见表末）                   |
| PreClose         | float  | 前收盘价格                                |
| SettlementPrice  | float  | 前结算价格                                |
| UpStopPrice      | float  | 当日涨停价                                |
| DownStopPrice    | float  | 当日跌停价                                |
| FloatVolume      | float  | 流通股本（注意，部分低等级客户端中此字段为FloatVolumn）    |
| TotalVolume      | float  | 总股本（注意，部分低等级客户端中此字段为FloatVolumn）     |
| LongMarginRatio  | float  | 多头保证金率                               |
| ShortMarginRatio | float  | 空头保证金率                               |
| PriceTick        | float  | 最小价格变动单位                             |
| VolumeMultiple   | int    | 合约乘数(对期货以外的品种，默认是1)                  |
| MainContract     | int    | 主力合约标记，1、2、3分别表示第一主力合约，第二主力合约，第三主力合约 |
| LastVolume       | int    | 昨日持仓量                                |
| InstrumentStatus | int    | 合约停牌状态(<=0:正常交易（-1:复牌）;>=1停牌天数;)     |
| IsTrading        | bool   | 合约是否可交易                              |
| IsRecent         | bool   | 是否是近月合约                              |

提示

字段`OpenDate`有以下几种特殊值： 19700101=新股, 19700102=老股东增发, 19700103=新债, 19700104=可转债, 19700105=配股， 19700106=配号 字段`ExpireDate`为0 或 99999999 时，表示该标的暂无退市日或到期日

字段`ProductType` 对于股票以外的品种，有以下几种值

国内期货市场：1-期货 2-期权(DF SF ZF INE GF) 3-组合套利 4-即期 5-期转现 6-期权(IF) 7-结算价交易(tas) 沪深股票期权市场：0-认购 1-认沽 外盘： 1-100：期货， 101-200：现货, 201-300:股票相关 1：股指期货 2：能源期货 3：农业期货 4：金属期货 5：利率期货 6：汇率期货 7：数字货币期货 99：自定义合约期货 107：数字货币现货 201：股票 202：GDR 203：ETF 204：ETN 300：其他

**示例**

示例返回值

```
# coding:gbk
def init(C):
    pass

def handlebar(C):
    data = C.get_instrumentdetail("000001.SZ")
    print(data)
```

#### 原生Python

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_instrument_detail(stock_code)
```

**参数**

| 名称           | 类型       | 描述     |
| ------------ | -------- | ------ |
| `stock_code` | `string` | `合约代码` |

**返回值**

- 一个字典, 有如下键值，找不到指定合约时返回`None`:

| 名称               | 类型     | 描述                                   |
| ---------------- | ------ | ------------------------------------ |
| ExchangeID       | string | 合约市场代码                               |
| InstrumentID     | string | 合约代码                                 |
| InstrumentName   | string | 合约名称                                 |
| ProductID        | string | 合约的品种ID(期货)                          |
| ProductName      | string | 合约的品种名称(期货)                          |
| ProductType      | int    | 合约的类型, 默认-1,枚举值可参考下方说明               |
| ExchangeCode     | string | 交易所代码                                |
| UniCode          | string | 统一规则代码                               |
| CreateDate       | str    | 创建日期                                 |
| OpenDate         | str    | 上市日期（特殊值情况见表末）                       |
| ExpireDate       | int    | 退市日或者到期日（特殊值情况见表末）                   |
| PreClose         | float  | 前收盘价格                                |
| SettlementPrice  | float  | 前结算价格                                |
| UpStopPrice      | float  | 当日涨停价                                |
| DownStopPrice    | float  | 当日跌停价                                |
| FloatVolume      | float  | 流通股本（注意，部分低等级客户端中此字段为FloatVolumn）    |
| TotalVolume      | float  | 总股本（注意，部分低等级客户端中此字段为FloatVolumn）     |
| LongMarginRatio  | float  | 多头保证金率                               |
| ShortMarginRatio | float  | 空头保证金率                               |
| PriceTick        | float  | 最小价格变动单位                             |
| VolumeMultiple   | int    | 合约乘数(对期货以外的品种，默认是1)                  |
| MainContract     | int    | 主力合约标记，1、2、3分别表示第一主力合约，第二主力合约，第三主力合约 |
| LastVolume       | int    | 昨日持仓量                                |
| InstrumentStatus | int    | 合约停牌状态(<=0:正常交易（-1:复牌）;>=1停牌天数;)     |
| IsTrading        | bool   | 合约是否可交易                              |
| IsRecent         | bool   | 是否是近月合约                              |

提示

字段`OpenDate`有以下几种特殊值： 19700101=新股, 19700102=老股东增发, 19700103=新债, 19700104=可转债, 19700105=配股， 19700106=配号 字段`ExpireDate`为0 或 99999999 时，表示该标的暂无退市日或到期日

字段`ProductType` 对于股票以外的品种，有以下几种值

国内期货市场：1-期货 2-期权(DF SF ZF INE GF) 3-组合套利 4-即期 5-期转现 6-期权(IF) 7-结算价交易(tas) 沪深股票期权市场：0-认购 1-认沽 外盘： 1-100：期货， 101-200：现货, 201-300:股票相关 1：股指期货 2：能源期货 3：农业期货 4：金属期货 5：利率期货 6：汇率期货 7：数字货币期货 99：自定义合约期货 107：数字货币现货 201：股票 202：GDR 203：ETF 204：ETN 300：其他

**示例**

示例返回值

```
from xtquant import xtdata

# 输出平安银行信息的中文名称
xtdata.get_instrument_detail("000001.SZ")
```

### 获取板块成分股列表

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_stock_list_in_sector(sector_name)
```

**参数**

| 名称            | 类型       | 描述     |
| ------------- | -------- | ------ |
| `sector_name` | `string` | `版块名称` |

**返回**

- `list`

**示例**

示例返回值

```
from xtquant import xtdata
# 获取沪深A股全部股票的代码
xtdata.get_stock_list_in_sector("沪深A股")
```

### 获取某只股票ST的历史

#### 内置python

提示

1. 本函数需要下载历史ST数据(过期合约K线),可通过`界面端数据管理 - 过期合约数据`下载
2. 该数据是[VIP权限数据](https://xuntou.net/#/productvip)

**原型**

内置python

```
ContextInfo.get_his_st_data(stockcode)
```

**释义**

获取某只股票ST的历史

**参数**

| 字段名         | 数据类型     | 解释                                 |
| ----------- | -------- | ---------------------------------- |
| `stockcode` | `string` | 股票代码，'stkcode.market'，如'000004.SZ' |

**返回值**

`dict`,st历史，key为ST,*ST,PT,历史未ST会返回{}

**示例**

示例返回值

```
# coding:gbk
def init(C):
    pass

def handlebar(C):
    print(C.get_his_st_data('000004.SZ'))
```

#### 原生python

提示

1. 获取该数据前需要先调用xtdata.download_his_st_data()进行数据下载
2. 该数据是[VIP权限数据](https://xuntou.net/#/productvip)

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_his_st_data(stock_code)
```

**参数**

| 名称           | 类型       | 描述     |
| ------------ | -------- | ------ |
| `stock_code` | `string` | `股票代码` |

**返回值**

- `dict`类型的st历史，key为ST,*ST,PT,历史未ST会返回{}

| 名称  | 类型   | 描述     |
| --- | ---- | ------ |
| ST  | list | ST时间段  |
| *ST | list | *ST时间段 |
| PT  | list | PT时间段  |

**示例**

示例返回值

```
from xtquant import xtdata
import time
# 下载市场历史ST情况
xtdata.download_his_st_data()

# 由于download_his_st_data是异步函数，需要确保下载完成

time.sleep(3)

# 获取000004.SZ历史ST情况
xtdata.get_his_st_data('000004.SZ')
```

## 获取行情数据

交易类数据提供股票的交易行情数据，通过API接口调用即可获取相应的数据。

具体请查看API, 数据获取部分行情相关接口 **[数据获取函数](http://docs.thinktrader.net/pages/36f5df/)**。

| 名称                    | 描述                                                                 |
| --------------------- | ------------------------------------------------------------------ |
| get_market_data       | 获取历史数据与实时行情(包含tick数据)，可查询多个标的多个数据字段，返回数据格式为 {field：DataFrame}      |
| get_market_data_ex    | 获取历史数据与实时行情(包含tick数据)，可查询多个标的多个数据字段，返回数据格式为 {stock_code：DataFrame} |
| get_local_data        | 获取历史数据(包含tick数据)，可查询单个或多个标的多个数据字段，返回数据格式为 {stock_code：DataFrame}   |
| get_full_tick         | 获取最新的 tick 数据                                                      |
| subscribe_whole_quote | 订阅多个标的实时tick数据                                                     |

### 获取历史行情与实时行情

提示

1. 在gmd系列函数中，历史行情需要从本地读取，所以若想取历史行情，需要先将历史行情下载到本地，而实时行情是从服务器返回的

2. 所以，若需要历史行情，请先使用`界面端`或者`download_history`函数进行下载；若需要最新行情，请向服务器进行`订阅`

3. 特别的，对于xtdata.get_market_data_ex来说，由于没有subscribe参数，需要在参数外先进行订阅(`subscribe_quote`)才能获取最新行情

4. 对于**同时获取历史和实时行情**的情况，gmd系列函数会**自动进行拼接**

#### 内置Python

**调用方法**

内置python

```
ContextInfo.get_market_data_ex(
    fields=[], 
    stock_code=[], 
    period='follow', 
    start_time='', 
    end_time='', 
    count=-1, 
    dividend_type='follow', 
    fill_data=True, 
    subscribe=True)
```

**释义**

获取实时行情与历史行情数据

**参数**

| 名称              | 类型     | 描述                                                                                                              |
| --------------- | ------ | --------------------------------------------------------------------------------------------------------------- |
| `field`         | `list` | `数据字段，详情见下方field字段表`                                                                                            |
| `stock_list`    | `list` | `合约代码列表`                                                                                                        |
| `period`        | `str`  | `数据周期，可选字段为:`<br>`"tick"`<br>`"1m"的整数倍周期`<br>`"5m"的整数倍周期`<br>`"1d"的整数倍周期`                                       |
| `start_time`    | `str`  | `数据起始时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S，填""为获取历史最早一天`                                                                 |
| `end_time`      | `str`  | `数据结束时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S ，填""为截止到最新一天`                                                                 |
| `count`         | `int`  | `数据个数`                                                                                                          |
| `dividend_type` | `str`  | `除权方式,可选值为`<br>`'none'：不复权`<br>`'front':前复权`<br>`'back':后复权`<br>`'front_ratio': 等比前复权`<br>`'back_ratio': 等比后复权` |
| `fill_data`     | `bool` | `是否填充数据`                                                                                                        |
| `subscribe`     | `bool` | `订阅数据开关，默认为True，设置为False时不做数据订阅，只读取本地已有数据。`                                                                     |

- `field`字段可选：

| field          | 数据类型    | 含义             |
| -------------- | ------- | -------------- |
| `time`         | `int`   | `时间`           |
| `open`         | `float` | `开盘价`          |
| `high`         | `float` | `最高价`          |
| `low`          | `float` | `最低价`          |
| `close`        | `float` | `收盘价`          |
| `volume`       | `float` | `成交量`          |
| `amount`       | `float` | `成交额`          |
| `settle`       | `float` | `今结算`          |
| `openInterest` | `float` | `持仓量`          |
| `preClose`     | `float` | `前收盘价`         |
| `suspendFlag`  | `int`   | `停牌` 1停牌，0 不停牌 |

- `period`周期为tick时，`field`字段可选:

| 字段名                   | 数据类型          | 含义                                                                                                                                                   |
| --------------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `time`                | `int`         | `时间戳`                                                                                                                                                |
| `stime`               | `string`      | `时间戳字符串形式`                                                                                                                                           |
| `lastPrice`           | `float`       | `最新价`                                                                                                                                                |
| `open`                | `float`       | `开盘价`                                                                                                                                                |
| `high`                | `float`       | `最高价`                                                                                                                                                |
| `low`                 | `float`       | `最低价`                                                                                                                                                |
| `lastClose`           | `float`       | `前收盘价`                                                                                                                                               |
| `amount`              | `float`       | `成交总额`                                                                                                                                               |
| `volume`              | `int`         | `成交总量（手）`                                                                                                                                            |
| `pvolume`             | `int`         | `原始成交总量(未经过股手转换的成交总量)【不推荐使用】`                                                                                                                        |
| `stockStatus`         | `int`         | `证券状态`                                                                                                                                               |
| `openInterest`        | `int`         | `若是股票，则openInt含义为股票状态，非股票则是持仓量`[openInt字段说明](https://dict.thinktrader.net/innerApi/data_structure.html#openint-%E8%AF%81%E5%88%B8%E7%8A%B6%E6%80%81) |
| `transactionNum`      | `float`       | `成交笔数(期货没有，单独计算)`                                                                                                                                    |
| `lastSettlementPrice` | `float`       | `前结算(股票为0)`                                                                                                                                          |
| `settlementPrice`     | `float`       | `今结算(股票为0)`                                                                                                                                          |
| `askPrice`            | `list[float]` | `多档委卖价`                                                                                                                                              |
| `askVol`              | `list[int]`   | `多档委卖量`                                                                                                                                              |
| `bidPrice`            | `list[float]` | `多档委买价`                                                                                                                                              |
| `bidVol`              | `list[int]`   | `多档委买量`                                                                                                                                              |

**返回值**

- 返回dict { stock_code1 : value1, stock_code2 : value2, ... }
- value1, value2, ... ：pd.DataFrame 数据集，index为time_list，columns为fields,可参考[Bar字段](https://dict.thinktrader.net/innerApi/data_structure.html#bar-bar%E5%AF%B9%E8%B1%A1)
- 各标的对应的DataFrame维度相同、索引相同

**示例**

获取行情示例仅获取历史行情仅获取最新行情获取历史行情+最新行情

```
# coding:gbk

def init(C):
  start_date = '20231001'# 格式"YYYYMMDD"，开始下载的日期，date = ""时全量下载
  end_date = "" 
  period = "1d" 

  need_download = 1  # 取数据是空值时，将need_download赋值为1，确保正确下载了历史数据

  code_list = ["000001.SZ", "600519.SH"] # 股票列表

  if need_download: # 判断要不要下载数据, gmd系列函数都是从本地读取历史数据,从服务器订阅获取最新数据
    my_download(code_list, period, start_date, end_date)

  ############ 仅获取历史行情 #####################
  subscribe = False # 设置订阅参数，使gmd_ex仅返回本地数据
  count = -1 # 设置count参数，使gmd_ex返回全部数据
  data1 = C.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date,subscribe = subscribe)

  ############ 仅获取最新行情 #####################
  subscribe = True # 设置订阅参数，使gmd_ex仅返回最新行情
  count = 1 # 设置count参数，使gmd_ex仅返回最新行情数据
  data2 = C.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date,subscribe = subscribe, count = 1) # count 设置为1，使返回值只包含最新行情

  ############ 获取历史行情+最新行情 #####################
  subscribe = True # 设置订阅参数，使gmd_ex仅返回最新行情
  count = -1 # 设置count参数，使gmd_ex返回全部数据
  data3 = C.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date,subscribe = subscribe, count = -1) # count 设置为-1，使返回值包含最新行情和历史行情


  print(data1[code_list[0]].tail())# 行情数据查看
  print(data2[code_list[0]].tail())
  print(data3[code_list[0]].tail())

def handlebar(C):
  return


def my_download(stock_list,period,start_date = '', end_date = ''):
  '''
  用于显示下载进度
  '''
  if "d" in period:
    period = "1d"
  elif "m" in period:
    if int(period[0]) < 5:
      period = "1m"
    else:
      period = "5m"
  elif "tick" == period:
    pass
  else:
    raise KeyboardInterrupt("周期传入错误")


  n = 1
  num = len(stock_list)
  for i in stock_list:
    print(f"当前正在下载{n}/{num}")

    download_history_data(i,period,start_date, end_date)
    n += 1
  print("下载任务结束")
```

#### 原生Python

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_market_data_ex(
    field_list=[],# 字段
    stock_list=[],# 合约代码列表
    period='1d',# 数据周期——1m、5m、1d、tick
    start_time='',# 数据起始时间%Y%m%d或%Y%m%d%H%M%S
    end_time='',# 数据结束时间%Y%m%d或%Y%m%d%H%M%S
    count=-1, # 数据个数
    dividend_type='none', # 除权方式
    fill_data=True, # 是否填充数据
)
```

**参数**

| 名称              | 类型     | 描述                                              |
| --------------- | ------ | ----------------------------------------------- |
| `field`         | `list` | `数据字段，详情见下方field字段表`                            |
| `stock_list`    | `list` | `合约代码列表`                                        |
| `period`        | `str`  | `数据周期——1m、5m、1d、tick`                           |
| `start_time`    | `str`  | `数据起始时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S，填""为获取历史最早一天` |
| `end_time`      | `str`  | `数据结束时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S ，填""为截止到最新一天` |
| `count`         | `int`  | `数据个数`                                          |
| `dividend_type` | `str`  | `除权方式`                                          |
| `fill_data`     | `bool` | `是否填充数据`                                        |

- `field`字段可选：

| field          | 数据类型    | 含义             |
| -------------- | ------- | -------------- |
| `time`         | `int`   | `时间`           |
| `open`         | `float` | `开盘价`          |
| `high`         | `float` | `最高价`          |
| `low`          | `float` | `最低价`          |
| `close`        | `float` | `收盘价`          |
| `volume`       | `float` | `成交量`          |
| `amount`       | `float` | `成交额`          |
| `settle`       | `float` | `今结算`          |
| `openInterest` | `float` | `持仓量`          |
| `preClose`     | `float` | `前收盘价`         |
| `suspendFlag`  | `int`   | `停牌` 1停牌，0 不停牌 |

- `period`周期为tick时，`field`字段可选:

| 字段名                   | 数据类型          | 含义                                                                                                                                                   |
| --------------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `time`                | `int`         | `时间戳`                                                                                                                                                |
| `stime`               | `string`      | `时间戳字符串形式`                                                                                                                                           |
| `lastPrice`           | `float`       | `最新价`                                                                                                                                                |
| `open`                | `float`       | `开盘价`                                                                                                                                                |
| `high`                | `float`       | `最高价`                                                                                                                                                |
| `low`                 | `float`       | `最低价`                                                                                                                                                |
| `lastClose`           | `float`       | `前收盘价`                                                                                                                                               |
| `amount`              | `float`       | `成交总额`                                                                                                                                               |
| `volume`              | `int`         | `成交总量（手）`                                                                                                                                            |
| `pvolume`             | `int`         | `原始成交总量(未经过股手转换的成交总量)【不推荐使用】`                                                                                                                        |
| `stockStatus`         | `int`         | `证券状态`                                                                                                                                               |
| `openInterest`        | `int`         | `若是股票，则openInt含义为股票状态，非股票则是持仓量`[openInt字段说明](https://dict.thinktrader.net/innerApi/data_structure.html#openint-%E8%AF%81%E5%88%B8%E7%8A%B6%E6%80%81) |
| `transactionNum`      | `float`       | `成交笔数(期货没有，单独计算)`                                                                                                                                    |
| `lastSettlementPrice` | `float`       | `前结算(股票为0)`                                                                                                                                          |
| `settlementPrice`     | `float`       | `今结算(股票为0)`                                                                                                                                          |
| `askPrice`            | `list[float]` | `多档委卖价`                                                                                                                                              |
| `askVol`              | `list[int]`   | `多档委卖量`                                                                                                                                              |
| `bidPrice`            | `list[float]` | `多档委买价`                                                                                                                                              |
| `bidVol`              | `list[int]`   | `多档委买量`                                                                                                                                              |

**返回值**

- period为`1m` `5m` `1d`K线周期时
  - 返回dict { field1 : value1, field2 : value2, ... }
  - value1, value2, ... ：pd.DataFrame 数据集，index为stock_list，columns为time_list
  - 各字段对应的DataFrame维度相同、索引相同

**示例**

示例仅获取历史行情仅获取最新行情获取历史行情+最新行情

```
from xtquant import xtdata
import time


def my_download(stock_list:list,period:str,start_date = '', end_date = ''):
    '''
    用于显示下载进度
    '''
    import string

    if [i for i in ["d","w","mon","q","y",] if i in period]:
        period = "1d"
    elif "m" in period:
        numb = period.translate(str.maketrans("", "", string.ascii_letters))
        if int(numb) < 5:
            period = "1m"
        else:
            period = "5m"
    elif "tick" == period:
        pass
    else:
        raise KeyboardInterrupt("周期传入错误")


    n = 1
    num = len(stock_list)
    for i in stock_list:
        print(f"当前正在下载 {period} {n}/{num}")

        xtdata.download_history_data(i,period,start_date, end_date)
        n += 1
    print("下载任务结束")

def do_subscribe_quote(stock_list:list, period:str):
  for i in stock_list:
    xtdata.subscribe_quote(i,period = period)
  time.sleep(1) # 等待订阅完成

if __name__ == "__main__":

  start_date = '20231001'# 格式"YYYYMMDD"，开始下载的日期，date = ""时全量下载
  end_date = "" 
  period = "1d" 

  need_download = 1  # 取数据是空值时，将need_download赋值为1，确保正确下载了历史数据

  code_list = ["000001.SZ", "600519.SH"] # 股票列表

  if need_download: # 判断要不要下载数据, gmd系列函数都是从本地读取历史数据,从服务器订阅获取最新数据
    my_download(code_list, period, start_date, end_date)

  ############ 仅获取历史行情 #####################
  count = -1 # 设置count参数，使gmd_ex返回全部数据
  data1 = xtdata.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date)

  ############ 仅获取最新行情 #####################
  do_subscribe_quote(code_list,period)# 设置订阅参数，使gmd_ex取到最新行情
  count = 1 # 设置count参数，使gmd_ex仅返回最新行情数据
  data2 = xtdata.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date, count = 1) # count 设置为1，使返回值只包含最新行情

  ############ 获取历史行情+最新行情 #####################
  do_subscribe_quote(code_list,period) # 设置订阅参数，使gmd_ex取到最新行情
  count = -1 # 设置count参数，使gmd_ex返回全部数据
  data3 = xtdata.get_market_data_ex([],code_list,period = period, start_time = start_date, end_time = end_date, count = -1) # count 设置为1，使返回值只包含最新行情


  print(data1[code_list[0]].tail())# 行情数据查看
  print(data2[code_list[0]].tail())
  print(data3[code_list[0]].tail())
```

### 获取股票历史涨跌停价格

#### 原生Python

提示

1. 获取该数据前需要先调用`xtdata.download_history_data`进行下载，period参数选择`"stoppricedata"`

2. 该数据通过`get_market_data_ex`接口获取，period参数选择`"stoppricedata"`

3. 若是只需要最新一天的涨跌停价格，可通过[get_instrument_detail](https://dict.thinktrader.net/dictionary/stock.html#%E8%8E%B7%E5%8F%96%E8%82%A1%E7%A5%A8%E6%A6%82%E5%86%B5)的`UpStopPrice`和`DownStopPrice`字段获取

4. 该数据是[VIP权限数据](https://xuntou.net/#/productvip)

**调用方法**

```
get_market_data_ex([],stock_list,period="stoppricedata",start_time = "", end_time = "")
```

**参数**

| 参数名称         | 类型       | 描述                                                                                                                                                                                 |
| ------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `field_list` | `list`   | 数据字段列表，传空则为全部字段                                                                                                                                                                    |
| `stock_list` | `list`   | 合约代码列表                                                                                                                                                                             |
| `period`     | `string` | 周期                                                                                                                                                                                 |
| `start_time` | `string` | 起始时间                                                                                                                                                                               |
| `end_time`   | `string` | 结束时间                                                                                                                                                                               |
| `count`      | `int`    | 数据个数。默认参数，大于等于0时，若指定了 `start_time`，`end_time`，此时以 `end_time` 为基准向前取 `count` 条；若 `start_time`，`end_time` 缺省，默认取本地数据最新的 `count` 条数据；若 `start_time`，`end_time`，`count` 都缺省时，默认取本地全部数据 |

**返回值**

返回一个 {`stock_code`:`pd.DataFrame`} 结构的`dict`对象，默认的列索引为取得的全部字段. 如果给定了 `fields` 参数, 则列索引与给定的 `fields` 对应.

**示例**

python返回值

```
from xtquant import xtdata

stock_list = xtdata.get_stock_list_in_sector("沪深A股")[:5]

# 下载涨跌停价格数据
for i in stock_list:
  xtdata.download_history_data(i, 'stoppricedata', '', '')

# 获取涨跌停价格数据
data = xtdata.get_market_data_ex([], stock_list, 'stoppricedata', '', '')

print(data)
```

### 股票快照指标

提供标的的量比，涨速，换手率等数据

提示

1. 通过指定period为`snapshotindex`获取该数据
2. 该数据为[VIP 权限数据](https://xuntou.net/#/productvip)
3. 获取时需要先通过[subscribe_quote](http://dict.thinktrader.net/innerApi/data_function.html#contextinfo-subscribe-quote-%E8%AE%A2%E9%98%85%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)进行订阅

#### 原生python

**调用方法**

```
xtdata.get_market_data_ex([],stock_list,period="snapshotindex",start_time = "", end_time = "")
```

**返回值**

分两种，当使用gmd_ex函数获取时:

- 一个`{stock_code:pd.DataFrame}`结构的dict对象，其中pd.DataFrame的结构为：
  - `index`: 时间序列,`str`类型值
  - `columns`: ['time', '量比', '1分钟涨速', '5分钟涨速', '3日涨幅', '5日涨幅', '10日涨幅', '3日换手', '5日换手', '10日换手']

当使用callback函数时：

- 一个`{stock_code:[{field1:values1,field2:values2,...}]}`的dict嵌套对象

**示例**

python返回值

```
from xtquant import xtdata

def f(data):
    print(data)

# 获取前需要先订阅，该数据通过指定period = 'snapshotindex'获取
xtdata.subscribe_quote("000001.SZ",period = 'snapshotindex', count = -1,callback = f)

data = xtdata.get_market_data_ex([],["000001.SZ"],period="snapshotindex",start_time = "", end_time = "",count = 10)
print(data)
```

### 涨跌停/集合竞价表现

#### 原生python

提供开盘集合竞价成交量，收盘集合竞价成交量，炸板次数，涨停金额等数据

提示

1. 通过指定period为`limitupperformance`获取该数据
2. 该数据为[VIP 权限数据](https://xuntou.net/#/productvip)
3. 获取历史数据时需要先通过[download_history_data]进行下载，实时数据通过[subscribe_quote](http://dict.thinktrader.net/innerApi/data_function.html#contextinfo-subscribe-quote-%E8%AE%A2%E9%98%85%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)进行订阅

**调用方法**

```
xtdata.get_market_data_ex([],stock_list,period="limitupperformance",start_time = "", end_time = "")
```

**返回值**

| 字段名           | 数据类型  | 含义                 |
| ------------- | ----- | ------------------ |
| time          | int   | 时间戳                |
| openVol       | int   | 开盘集合竞价的成交量         |
| closeVol      | int   | 收盘集合竞价的成交量         |
| finalVol      | int   | 盘后定价的成交量           |
| startUp       | int   | 涨停开始时间             |
| endUp         | int   | 涨停结束时间             |
| breakUp       | int   | 炸板次数               |
| upAmount      | float | 涨停金额               |
| startDn       | int   | 跌停开始时间             |
| endDn         | int   | 跌停结束时间             |
| breakDn       | int   | 开板次数               |
| dnAmount      | float | 跌停金额               |
| direct        | int   | 涨跌方向 0-无 1-涨停 2-跌停 |
| sealVolRatio  | float | 封成比                |
| sealFreeRatio | float | 封流比                |
| bidPreRatio   | float | 竞昨比                |
| sealCount     | int   | 几板                 |
| sealDays      | int   | 几天                 |
| sealBreak     | int   | 封板中断天数             |

**示例**

python返回值

```
from xtquant import xtdata


def f(data):
    print(data)

period = "limitupperformance"
stock = "000001.SZ"
ls = [stock]
xtdata.download_history_data2(ls,period = period) # 下载历史数据

# 获取前需要先订阅，该数据通过指定period = 'limitupperformance'获取
xtdata.subscribe_quote(stock,period = 'limitupperformance', count = -1,callback = f)

data = xtdata.get_market_data_ex([],[stock],period="limitupperformance",start_time = "", end_time = "",count = 10)
print(data)
```

## 获取股票资金流向数据

获取一只或者多只股票在一个时间段内的资金流向数据

提示

1.该数据通过`get_market_data`和`get_market_data_ex`接口获取，period参数选择`transactioncount1d` 或者 `transactioncount1m`  
2.获取历史数据前需要先用`download_history_data`下载历史数据  
3.[VIP 权限数据](https://xuntou.net/#/productvip)

### 内置python

**原型**

内置python

```
# 逐笔成交统计日级
C.get_market_data_ex([],stock_list,period="transactioncount1d",start_time = "", end_time = "")
# 逐步成交统计1分钟级
C.get_market_data_ex([],stock_list,period="transactioncount1m",start_time = "", end_time = "")
```

**参数**

除period参数需指定为`transactioncount1d` 或者 `transactioncount1m`外，其余参数与[ContextInfo.get_market_data_ex](https://dict.thinktrader.net/innerApi/data_function.html#contextinfo-get-market-data-ex-%E8%8E%B7%E5%8F%96%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)一致

**返回值**

- 返回dict { stock_code1 : value1, stock_code2 : value2, ... }
- value1, value2, ... ：pd.DataFrame 数据集，index为time_list，columns为fields

提示

特大单：成交金额大于或等于100万元或成交量大于或等于5000手

大单：成交金额大于或等于20万元或成交量大于或等于1000手

中单：成交金额大于或等于4万元或成交量大于或等于200手

小单：其它为小单

| 字段名                       | 数据类型  | 解释          |
| ------------------------- | ----- | ----------- |
| time                      | int   | 时间戳         |
| bidNumber                 | int   | 主买单总单数      |
| offNumber                 | int   | 主卖单总单数      |
| ddx                       | float | 大单动向        |
| ddy                       | float | 涨跌动因        |
| ddz                       | float | 大单差分        |
| netOrder                  | int   | 净挂单量        |
| netWithdraw               | int   | 净撤单量        |
| withdrawBid               | int   | 总撤买量        |
| withdrawOff               | int   | 总撤卖量        |
| bidNumberDx               | int   | 主买单总单数增量    |
| offNumberDx               | int   | 主卖单总单数增量    |
| transactionNumber         | int   | 成交笔数增量      |
| bidMostAmount             | float | 主买特大单成交额    |
| bidBigAmount              | float | 主买大单成交额     |
| bidMediumAmount           | float | 主买中单成交额     |
| bidSmallAmount            | float | 主买小单成交额     |
| bidTotalAmount            | float | 主买累计成交额     |
| offMostAmount             | float | 主卖特大单成交额    |
| offBigAmount              | float | 主卖大单成交额     |
| offMediumAmount           | float | 主卖中单成交额     |
| offSmallAmount            | float | 主卖小单成交额     |
| offTotalAmount            | float | 主卖累计成交额     |
| unactiveBidMostAmount     | float | 被动买特大单成交额   |
| unactiveBidBigAmount      | float | 被动买大单成交额    |
| unactiveBidMediumAmount   | float | 被动买中单成交额    |
| unactiveBidSmallAmount    | float | 被动买小单成交额    |
| unactiveBidTotalAmount    | float | 被动买累计成交额    |
| unactiveOffMostAmount     | float | 被动卖特大单成交额   |
| unactiveOffBigAmount      | float | 被动卖大单成交额    |
| unactiveOffMediumAmount   | float | 被动卖中单成交额    |
| unactiveOffSmallAmount    | float | 被动卖小单成交额    |
| unactiveOffTotalAmount    | float | 被动卖累计成交额    |
| netInflowMostAmount       | float | 净流入超大单成交额   |
| netInflowBigAmount        | float | 净流入大单成交额    |
| netInflowMediumAmount     | float | 净流入中单成交额    |
| netInflowSmallAmount      | float | 净流入小单成交额    |
| bidMostVolume             | int   | 主买特大单成交量    |
| bidBigVolume              | int   | 主买大单成交量     |
| bidMediumVolume           | int   | 主买中单成交量     |
| bidSmallVolume            | int   | 主买小单成交量     |
| bidTotalVolume            | int   | 主买累计成交量     |
| offMostVolume             | int   | 主卖特大单成交量    |
| offBigVolume              | int   | 主卖大单成交量     |
| offMediumVolume           | int   | 主卖中单成交量     |
| offSmallVolume            | int   | 主卖小单成交量     |
| offTotalVolume            | int   | 主卖累计成交量     |
| unactiveBidMostVolume     | int   | 被动买特大单成交量   |
| unactiveBidBigVolume      | int   | 被动买大单成交量    |
| unactiveBidMediumVolume   | int   | 被动买中单成交量    |
| unactiveBidSmallVolume    | int   | 被动买小单成交量    |
| unactiveBidTotalVolume    | int   | 被动买累计成交量    |
| unactiveOffMostVolume     | int   | 被动卖特大单成交量   |
| unactiveOffBigVolume      | int   | 被动卖大单成交量    |
| unactiveOffMediumVolume   | int   | 被动卖中单成交量    |
| unactiveOffSmallVolume    | int   | 被动卖小单成交量    |
| unactiveOffTotalVolume    | int   | 被动卖累计成交量    |
| netInflowMostVolume       | int   | 净流入超大单成交量   |
| netInflowBigVolume        | int   | 净流入大单成交量    |
| netInflowMediumVolume     | int   | 净流入中单成交量    |
| netInflowSmallVolume      | int   | 净流入小单成交量    |
| bidMostAmountDx           | float | 主买特大单成交额增量  |
| bidBigAmountDx            | float | 主买大单成交额增量   |
| bidMediumAmountDx         | float | 主买中单成交额增量   |
| bidSmallAmountDx          | float | 主买小单成交额增量   |
| bidTotalAmountDx          | float | 主买累计成交额增量   |
| offMostAmountDx           | float | 主卖特大单成交额增量  |
| offBigAmountDx            | float | 主卖大单成交额增量   |
| offMediumAmountDx         | float | 主卖中单成交额增量   |
| offSmallAmountDx          | float | 主卖小单成交额增量   |
| offTotalAmountDx          | float | 主卖累计成交额增量   |
| unactiveBidMostAmountDx   | float | 被动买特大单成交额增量 |
| unactiveBidBigAmountDx    | float | 被动买大单成交额增量  |
| unactiveBidMediumAmountDx | float | 被动买中单成交额增量  |
| unactiveBidSmallAmountDx  | float | 被动买小单成交额增量  |
| unactiveBidTotalAmountDx  | float | 被动买累计成交额增量  |
| unactiveOffMostAmountDx   | float | 被动卖特大单成交额增量 |
| unactiveOffBigAmountDx    | float | 被动卖大单成交额增量  |
| unactiveOffMediumAmountDx | float | 被动卖中单成交额增量  |
| unactiveOffSmallAmountDx  | float | 被动卖小单成交额增量  |
| unactiveOffTotalAmountDx  | float | 被动卖累计成交额增量  |
| netInflowMostAmountDx     | float | 净流入超大单成交额增量 |
| netInflowBigAmountDx      | float | 净流入大单成交额增量  |
| netInflowMediumAmountDx   | float | 净流入中单成交额增量  |
| netInflowSmallAmountDx    | float | 净流入小单成交额增量  |
| bidMostVolumeDx           | int   | 主买特大单成交量增量  |
| bidBigVolumeDx            | int   | 主买大单成交量增量   |
| bidMediumVolumeDx         | int   | 主买中单成交量增量   |
| bidSmallVolumeDx          | int   | 主买小单成交量增量   |
| bidTotalVolumeDx          | int   | 主买累计成交量增量   |
| offMostVolumeDx           | int   | 主卖特大单成交量增量  |
| offBigVolumeDx            | int   | 主卖大单成交量增量   |
| offMediumVolumeDx         | int   | 主卖中单成交量增量   |
| offSmallVolumeDx          | int   | 主卖小单成交量增量   |
| offTotalVolumeDx          | int   | 主卖累计成交量增量   |
| unactiveBidMostVolumeDx   | int   | 被动买特大单成交量增量 |
| unactiveBidBigVolumeDx    | int   | 被动买大单成交量增量  |
| unactiveBidMediumVolumeDx | int   | 被动买中单成交量增量  |
| unactiveBidSmallVolumeDx  | int   | 被动买小单成交量增量  |
| unactiveBidTotalVolumeDx  | int   | 被动买累计成交量增量  |
| unactiveOffMostVolumeDx   | int   | 被动卖特大单成交量增量 |
| unactiveOffBigVolumeDx    | int   | 被动卖大单成交量增量  |
| unactiveOffMediumVolumeDx | int   | 被动卖中单成交量增量  |
| unactiveOffSmallVolumeDx  | int   | 被动卖小单成交量增量  |
| unactiveOffTotalVolumeDx  | int   | 被动卖累计成交量增量  |
| netInflowMostVolumeDx     | int   | 净流入超大单成交量增量 |
| netInflowBigVolumeDx      | int   | 净流入大单成交量增量  |
| netInflowMediumVolumeDx   | int   | 净流入中单成交量增量  |
| netInflowSmallVolumeDx    | int   | 净流入小单成交量增量  |

**示例**

python返回值

```
# coding:gbk


def init(C):
    return


def f(data):
    print(data)

def after_init(C):
    stock_list = ["000001.SZ"]
    if 1:
        download_history_data("000001.SZ","transactioncount1d",'','')


    C.subscribe_quote("000001.SZ","transactioncount1d",callback = f)
    # C.subscribe_quote("000001.SZ","transactioncount1d")
    print(C.get_market_data_ex([],stock_list,period="transactioncount1d",start_time = "", end_time = ""))
    pass
```

### 原生python

**原型**

原生python

```
# 逐笔成交统计日级
get_market_data_ex([],stock_list,period="transactioncount1d",start_time = "", end_time = "")
# 逐步成交统计1分钟级
get_market_data_ex([],stock_list,period="transactioncount1m",start_time = "", end_time = "")
```

**参数**

| 参数名称            | 类型       | 描述                                                                                                                                                                                 |
| --------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `field_list`    | `list`   | 数据字段列表，传空则为全部字段                                                                                                                                                                    |
| `stock_list`    | `list`   | 合约代码列表                                                                                                                                                                             |
| `period`        | `string` | 周期                                                                                                                                                                                 |
| `start_time`    | `string` | 起始时间                                                                                                                                                                               |
| `end_time`      | `string` | 结束时间                                                                                                                                                                               |
| `count`         | `int`    | 数据个数。默认参数，大于等于0时，若指定了 `start_time`，`end_time`，此时以 `end_time` 为基准向前取 `count` 条；若 `start_time`，`end_time` 缺省，默认取本地数据最新的 `count` 条数据；若 `start_time`，`end_time`，`count` 都缺省时，默认取本地全部数据 |
| `dividend_type` | `string` | 除权方式                                                                                                                                                                               |
| `fill_data`     | `bool`   | 是否向后填充空缺数据                                                                                                                                                                         |

- `field_list`字段可选:

提示

特大单：成交金额大于或等于100万元或成交量大于或等于5000手

大单：成交金额大于或等于20万元或成交量大于或等于1000手

中单：成交金额大于或等于4万元或成交量大于或等于200手

小单：其它为小单

| 字段名                       | 数据类型  | 解释          |
| ------------------------- | ----- | ----------- |
| time                      | int   | 时间戳         |
| bidNumber                 | int   | 主买单总单数      |
| offNumber                 | int   | 主卖单总单数      |
| ddx                       | float | 大单动向        |
| ddy                       | float | 涨跌动因        |
| ddz                       | float | 大单差分        |
| netOrder                  | int   | 净挂单量        |
| netWithdraw               | int   | 净撤单量        |
| withdrawBid               | int   | 总撤买量        |
| withdrawOff               | int   | 总撤卖量        |
| bidNumberDx               | int   | 主买单总单数增量    |
| offNumberDx               | int   | 主卖单总单数增量    |
| transactionNumber         | int   | 成交笔数增量      |
| bidMostAmount             | float | 主买特大单成交额    |
| bidBigAmount              | float | 主买大单成交额     |
| bidMediumAmount           | float | 主买中单成交额     |
| bidSmallAmount            | float | 主买小单成交额     |
| bidTotalAmount            | float | 主买累计成交额     |
| offMostAmount             | float | 主卖特大单成交额    |
| offBigAmount              | float | 主卖大单成交额     |
| offMediumAmount           | float | 主卖中单成交额     |
| offSmallAmount            | float | 主卖小单成交额     |
| offTotalAmount            | float | 主卖累计成交额     |
| unactiveBidMostAmount     | float | 被动买特大单成交额   |
| unactiveBidBigAmount      | float | 被动买大单成交额    |
| unactiveBidMediumAmount   | float | 被动买中单成交额    |
| unactiveBidSmallAmount    | float | 被动买小单成交额    |
| unactiveBidTotalAmount    | float | 被动买累计成交额    |
| unactiveOffMostAmount     | float | 被动卖特大单成交额   |
| unactiveOffBigAmount      | float | 被动卖大单成交额    |
| unactiveOffMediumAmount   | float | 被动卖中单成交额    |
| unactiveOffSmallAmount    | float | 被动卖小单成交额    |
| unactiveOffTotalAmount    | float | 被动卖累计成交额    |
| netInflowMostAmount       | float | 净流入超大单成交额   |
| netInflowBigAmount        | float | 净流入大单成交额    |
| netInflowMediumAmount     | float | 净流入中单成交额    |
| netInflowSmallAmount      | float | 净流入小单成交额    |
| bidMostVolume             | int   | 主买特大单成交量    |
| bidBigVolume              | int   | 主买大单成交量     |
| bidMediumVolume           | int   | 主买中单成交量     |
| bidSmallVolume            | int   | 主买小单成交量     |
| bidTotalVolume            | int   | 主买累计成交量     |
| offMostVolume             | int   | 主卖特大单成交量    |
| offBigVolume              | int   | 主卖大单成交量     |
| offMediumVolume           | int   | 主卖中单成交量     |
| offSmallVolume            | int   | 主卖小单成交量     |
| offTotalVolume            | int   | 主卖累计成交量     |
| unactiveBidMostVolume     | int   | 被动买特大单成交量   |
| unactiveBidBigVolume      | int   | 被动买大单成交量    |
| unactiveBidMediumVolume   | int   | 被动买中单成交量    |
| unactiveBidSmallVolume    | int   | 被动买小单成交量    |
| unactiveBidTotalVolume    | int   | 被动买累计成交量    |
| unactiveOffMostVolume     | int   | 被动卖特大单成交量   |
| unactiveOffBigVolume      | int   | 被动卖大单成交量    |
| unactiveOffMediumVolume   | int   | 被动卖中单成交量    |
| unactiveOffSmallVolume    | int   | 被动卖小单成交量    |
| unactiveOffTotalVolume    | int   | 被动卖累计成交量    |
| netInflowMostVolume       | int   | 净流入超大单成交量   |
| netInflowBigVolume        | int   | 净流入大单成交量    |
| netInflowMediumVolume     | int   | 净流入中单成交量    |
| netInflowSmallVolume      | int   | 净流入小单成交量    |
| bidMostAmountDx           | float | 主买特大单成交额增量  |
| bidBigAmountDx            | float | 主买大单成交额增量   |
| bidMediumAmountDx         | float | 主买中单成交额增量   |
| bidSmallAmountDx          | float | 主买小单成交额增量   |
| bidTotalAmountDx          | float | 主买累计成交额增量   |
| offMostAmountDx           | float | 主卖特大单成交额增量  |
| offBigAmountDx            | float | 主卖大单成交额增量   |
| offMediumAmountDx         | float | 主卖中单成交额增量   |
| offSmallAmountDx          | float | 主卖小单成交额增量   |
| offTotalAmountDx          | float | 主卖累计成交额增量   |
| unactiveBidMostAmountDx   | float | 被动买特大单成交额增量 |
| unactiveBidBigAmountDx    | float | 被动买大单成交额增量  |
| unactiveBidMediumAmountDx | float | 被动买中单成交额增量  |
| unactiveBidSmallAmountDx  | float | 被动买小单成交额增量  |
| unactiveBidTotalAmountDx  | float | 被动买累计成交额增量  |
| unactiveOffMostAmountDx   | float | 被动卖特大单成交额增量 |
| unactiveOffBigAmountDx    | float | 被动卖大单成交额增量  |
| unactiveOffMediumAmountDx | float | 被动卖中单成交额增量  |
| unactiveOffSmallAmountDx  | float | 被动卖小单成交额增量  |
| unactiveOffTotalAmountDx  | float | 被动卖累计成交额增量  |
| netInflowMostAmountDx     | float | 净流入超大单成交额增量 |
| netInflowBigAmountDx      | float | 净流入大单成交额增量  |
| netInflowMediumAmountDx   | float | 净流入中单成交额增量  |
| netInflowSmallAmountDx    | float | 净流入小单成交额增量  |
| bidMostVolumeDx           | int   | 主买特大单成交量增量  |
| bidBigVolumeDx            | int   | 主买大单成交量增量   |
| bidMediumVolumeDx         | int   | 主买中单成交量增量   |
| bidSmallVolumeDx          | int   | 主买小单成交量增量   |
| bidTotalVolumeDx          | int   | 主买累计成交量增量   |
| offMostVolumeDx           | int   | 主卖特大单成交量增量  |
| offBigVolumeDx            | int   | 主卖大单成交量增量   |
| offMediumVolumeDx         | int   | 主卖中单成交量增量   |
| offSmallVolumeDx          | int   | 主卖小单成交量增量   |
| offTotalVolumeDx          | int   | 主卖累计成交量增量   |
| unactiveBidMostVolumeDx   | int   | 被动买特大单成交量增量 |
| unactiveBidBigVolumeDx    | int   | 被动买大单成交量增量  |
| unactiveBidMediumVolumeDx | int   | 被动买中单成交量增量  |
| unactiveBidSmallVolumeDx  | int   | 被动买小单成交量增量  |
| unactiveBidTotalVolumeDx  | int   | 被动买累计成交量增量  |
| unactiveOffMostVolumeDx   | int   | 被动卖特大单成交量增量 |
| unactiveOffBigVolumeDx    | int   | 被动卖大单成交量增量  |
| unactiveOffMediumVolumeDx | int   | 被动卖中单成交量增量  |
| unactiveOffSmallVolumeDx  | int   | 被动卖小单成交量增量  |
| unactiveOffTotalVolumeDx  | int   | 被动卖累计成交量增量  |
| netInflowMostVolumeDx     | int   | 净流入超大单成交量增量 |
| netInflowBigVolumeDx      | int   | 净流入大单成交量增量  |
| netInflowMediumVolumeDx   | int   | 净流入中单成交量增量  |
| netInflowSmallVolumeDx    | int   | 净流入小单成交量增量  |

**返回**

返回一个 {`stock_code`:`pd.DataFrame`} 结构的`dict`对象，默认的列索引为取得的全部字段. 如果给定了 `fields` 参数, 则列索引与给定的 `fields` 对应.

**示例**

示例data1返回值data2返回值data3返回值

```
from xtquant import xtdata

# 获取历史数据前，请确保已经下载历史数据
xtdata.download_history_data("000001.SZ",period="transactioncount1d")
xtdata.download_history_data("000582.SZ",period="transactioncount1d")

# 获取一只股票在一个时间段内的资金流量数据
data1 = xtdata.get_market_data_ex([],["000001.SZ"],period="transactioncount1d",start_time = "20230101", end_time = "20230109")

# 获取多只股票在一个时间段内的资金流向数据
data2 = xtdata.get_market_data_ex([],["000001.SZ","000582.SZ"],period="transactioncount1d",start_time = "20230101", end_time = "20231009")
# 获取多只股票在某一天的资金流向数据
data3 = xtdata.get_market_data_ex([],["000001.SZ","000582.SZ"],period="transactioncount1d",start_time = "20231009", end_time = "20231009")
```

## 获取股票订单流数据

获取股票在某个价位的订单数量

提示

1.该数据通过`get_market_data`和`get_market_data_ex`接口获取，period参数选择`orderflow1m` 或者 `orderflow1d`  
2.获取历史数据前需要先用`download_history_data`下载历史数据，订单流数据仅提供`orderflow1m`周期数据下载，其他周期的订单流数据都是通过1m周期合成的  
3.[订单流版 权限数据](https://xuntou.net/#/productvip)

### 内置python

**原型**

python

```
# 一分钟订单流
C.get_market_data_ex([],stock_list,period="orderflow1m",start_time = "", end_time = "")
# 1d订单流
C.get_market_data_ex([],stock_list,period="orderflow1d",start_time = "", end_time = "")
```

**参数** 除period参数需指定为`orderflow1m` 或者 `orderflow1d`外，其余参数与[ContextInfo.get_market_data_ex](https://dict.thinktrader.net/innerApi/data_function.html#contextinfo-get-market-data-ex-%E8%8E%B7%E5%8F%96%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)一致

**返回值**

- 返回dict { stock_code1 : value1, stock_code2 : value2, ... }
- value1, value2, ... ：pd.DataFrame 数据集，index为time_list，columns为fields

**示例**

python返回值

```
# coding:gbk
def init(C):
    return

def f(data):
    print(data)

def after_init(C):
    stock_list = ["000001.SZ"]
    if 1:
        download_history_data("000001.SZ","orderflow1m",'','')


    C.subscribe_quote("000001.SZ","orderflow1m",callback = f)
    # C.subscribe_quote("000001.SZ","transactioncount1d")
    print(C.get_market_data_ex([],stock_list,period="orderflow1m",start_time = "", end_time = "",count = 1))
```

### 原生pytrhon

python

```
from xtquant import xtdata
# 订单流数据仅提供1m周期数据下载，其他周期的订单流数据都是通过1m周期合成的
period = "orderflow1m"
# 下载000001.SZ的1m订单流数据
xtdata.download_history_data("000001.SZ",period=period)
# 获取000001.SZ的1m订单流数据
xtdata.get_market_data_ex([],["000001.SZ"],period=period)["000001.SZ"]
```

**参数**

| 名称              | 类型     | 描述                                                                                        |
| --------------- | ------ | ----------------------------------------------------------------------------------------- |
| `field`         | `list` | `数据字段，详情见下方field字段表`                                                                      |
| `stock_list`    | `list` | `合约代码列表`                                                                                  |
| `period`        | `str`  | `订单流数据周期——orderflow1m, orderflow5m, orderflow15m, orderflow30m, orderflow1h, orderflow1d` |
| `start_time`    | `str`  | `数据起始时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S，填""为获取历史最早一天`                                           |
| `end_time`      | `str`  | `数据结束时间，格式为 %Y%m%d 或 %Y%m%d%H%M%S ，填""为截止到最新一天`                                           |
| `count`         | `int`  | `数据个数`                                                                                    |
| `dividend_type` | `str`  | `除权方式`                                                                                    |
| `fill_data`     | `bool` | `是否填充数据`                                                                                  |

- `field`字段可选：

| field     | 数据类型  | 含义            |
| --------- | ----- | ------------- |
| `time`    | `str` | `时间`          |
| `price`   | `str` | `价格段`         |
| `buyNum`  | `str` | `各价格对应的买方订单量` |
| `sellNum` | `str` | `各价格对应的卖方订单量` |

- `period`字段可选:

| period         | 数据类型  | 含义           |
| -------------- | ----- | ------------ |
| `orderflow1m`  | `str` | `1m周期订单流数据`  |
| `orderflow5m`  | `str` | `5m周期订单流数据`  |
| `orderflow15m` | `str` | `15m周期订单流数据` |
| `orderflow30m` | `str` | `30m周期订单流数据` |
| `orderflow1h`  | `str` | `1h周期订单流数据`  |
| `orderflow1d`  | `str` | `1d周期订单流数据`  |

**返回值** 返回一个 {`stock_code`:`pd.DataFrame`} 结构的`dict`对象，默认的列索引为取得的全部字段. 如果给定了 `fields` 参数, 则列索引与给定的 `fields` 对应.

**示例**

示例data1返回值data2返回值data3返回值data4返回值

```
# 下载000001.SZ的orderflow1m，以获取历史数据
# orderflow仅提供1m周期进行下载，其他周期皆在系统底层通过1m订单流数据进行合成给出
xtdata.download_history_data("000001.SZ",period="orderflow1m")


# 获取000001.SZ，1m订单流数据
period = "orderflow1m"
data1 = xtdata.get_market_data_ex([],["000001.SZ"],period=period)["000001.SZ"]

# 获取000001.SZ, 5m订单流数据
period = "orderflow5m"
data2 = xtdata.get_market_data_ex([],["000001.SZ"],period=period)["000001.SZ"]

# 获取000001.SZ 1d订单流数据
period = "orderflow1d"
data3 = xtdata.get_market_data_ex([],["000001.SZ"],period=period)["000001.SZ"]

# 订阅实时000001.SZ 1m订单流数据
period = "orderflow1m"

# 进行数据订阅
xtdata.subscribe_quote("000001.SZ", period = period)
# 获取订阅后的实时数据
data4 = xtdata.get_market_data_ex([],["000001.SZ"],period=period)["000001.SZ"]

print(data1)
print(data2)
print(data3)

print(data4)
```

## 获取问董秘数据

提示

1.该数据通过`get_market_data_ex`接口获取,周期需填写为 **`interactiveqa`**  
2.获取数据前需要先用`download_history_data`下载历史数据  
3.[VIP 权限数据](https://xuntou.net/#/productvip)

### 原生python

python

```
from xtquant import xtdata
xtdata.get_market_data_ex(field_list,stock_list,period='interactiveqa')
```

**参数**

除period 需填写为`interactiveqa`外，其余参数参考`get_market_data_ex`

**返回值**

返回一个 {`stock_code`:`pd.DataFrame`} 结构的`dict`对象

**示例**

示例返回值

```
from xtquant import xtdata
xtdata.download_history_data("000001.SZ",period="interactiveqa")
data = xtdata.get_market_data_ex([],["000001.SZ"],period="interactiveqa")
print(data)
```

## 获取交易日历

获取历史和未来日历数据

### 内置python

**调用方法**

内置python

```
get_trading_calendar(market,start_time='',end_time='')
```

**参数**

| 参数名称         | 类型    | 描述                |
| ------------ | ----- | ----------------- |
| `market`     | `str` | 市场，如 'SH'         |
| `start_time` | `str` | 起始时间，如 '20170101' |
| `end_time`   | `str` | 结束时间，如 '20180101' |

**返回值**

- list类型

**示例**

示例返回值

```
# coding:gbk
def init(C):
    return
def after_init(C):
    print(get_trading_calendar('SZ','20230103','20240103'))
```

### 原生python

**调用方法**

原生python

```
# 下载交易日历数据
xtdata.download_holiday_data()
# 返回获取的交易日历 
result = xtdata.get_trading_calendar(market, start_time , end_time )
```

**参数**

| 参数名称         | 类型    | 描述                |
| ------------ | ----- | ----------------- |
| `market`     | `str` | 市场，如 'SH'         |
| `start_time` | `str` | 起始时间，如 '20170101' |
| `end_time`   | `str` | 结束时间，如 '20180101' |

**返回值**

- list类型

**示例**

示例返回值

```
# coding:utf-8
from xtquant import xtdata
import time

# 下载交易日历数据
xtdata.download_holiday_data()
# 获取交易日
start_time =  time.strftime("%Y%m%d") # 起始日期
end_time = time.strftime("%Y") + '1231' #结束日期,这里我用time函数自动计算年,格式生成'20241231'
# 返回获取的交易日历 
result = xtdata.get_trading_calendar('SH', start_time , end_time )
print(result)
```

## 获取龙虎榜数据

获取指定日期区间内的龙虎榜数据

内置python

```
C.get_longhubang(stock_list, startTime, endTime)
```

**参数**

| 参数名称         | 类型     | 描述                                |
| ------------ | ------ | --------------------------------- |
| `stock_list` | `list` | 股票列表，如 ['600000.SH', '600036.SH'] |
| `startTime`  | `str`  | 起始时间，如 '20170101'                 |
| `endTime`    | `str`  | 结束时间，如 '20180101'                 |

**返回值**

- 格式为`pandas.DataFrame`:

| 参数名称              | 数据类型               | 描述   |
| ----------------- | ------------------ | ---- |
| `reason`          | `str`              | 上榜原因 |
| `close`           | `float`            | 收盘价  |
| `spreadRate`      | `float`            | 涨跌幅  |
| `TurnoverVolune`  | `float`            | 成交量  |
| `Turnover_Amount` | `float`            | 成交金额 |
| `buyTraderBooth`  | `pandas.DataFrame` | 买方席位 |
| `sellTraderBooth` | `pandas.DataFrame` | 卖方席位 |

- `buyTraderBooth` 或 `sellTraderBooth` 包含字段：

| 参数名称          | 数据类型    | 描述         |
| ------------- | ------- | ---------- |
| `traderName`  | `str`   | 交易营业部名称    |
| `buyAmount`   | `float` | 买入金额       |
| `buyPercent`  | `float` | 买入金额占总成交占比 |
| `sellAmount`  | `float` | 卖出金额       |
| `sellPercent` | `float` | 卖出金额占总成交占比 |
| `totalAmount` | `float` | 该席位总成交金额   |
| `rank`        | `int`   | 席位排行       |
| `direction`   | `int`   | 买卖方向       |

**示例**

示例返回值

```
# coding:gbk

def init(C):
    return

def handlebar(C):
    print(C.get_longhubang(['000002.SZ'],'20100101','20180101'))
```

## 北向南向资金（沪港通，深港通和港股通）

### 北向南向资金交易日历

获取交易日列表

python

```
from xtquant import xtdata
xtdata.get_trading_dates(market, start_time='', end_time='', count=-1)
```

**参数：**

| 参数名称         | 类型       | 描述   |
| ------------ | -------- | ---- |
| `market`     | `string` | 市场代码 |
| `start_time` | `string` | 起始时间 |
| `end_time`   | `string` | 结束时间 |
| `count`      | `int`    | 数据个数 |

**返回**

- `list` 时间戳列表，[ date1, date2, ... ]

**示例**

示例返回值

```
from xtquant import xtdata

# 获取沪港通最近十五天交易日历
data1 = xtdata.get_trading_dates(market = "HGT", start_time='', end_time='', count=-1)[-15:]
```

### 获取对应周期的北向南向数据

提示

1. 该数据通过`get_market_data_ex`接口获取
2. 获取历史数据前需要先用`download_history_data`下载历史数据,可选字段为`"northfinancechange1m"`：一分钟周期北向数据,`"northfinancechange1d"`：日线周期北向数据
3. [VIP 权限数据](https://xuntou.net/#/productvip)

#### 方式1：内置python

获取对应周期的北向数据

内置python

```
C.get_north_finance_change(period)
```

**参数：**

| 字段名      | 数据类型  | 描述   |
| -------- | ----- | ---- |
| `period` | `str` | 数据周期 |

**返回结果：**

- 根据`period`返回一个`dict`，该字典的`key`值是北向数据的时间戳，其值仍然是一个`dict`，其值的`key`值是北向数据的字段类型，其值是对应字段的值。该字典数据`key`值有：

| 字段名                  | 数据类型 | 描述          |
| -------------------- | ---- | ----------- |
| hgtNorthBuyMoney     | int  | HGT北向买入资金   |
| hgtNorthSellMoney    | int  | HGT北向卖出资金   |
| hgtSouthBuyMoney     | int  | HGT南向买入资金   |
| hgtSouthSellMoney    | int  | HGT南向卖出资金   |
| sgtNorthBuyMoney     | int  | SGT北向买入资金   |
| sgtNorthSellMoney    | int  | SGT北向卖出资金   |
| sgtSouthBuyMoney     | int  | SGT南向买入资金   |
| sgtSouthSellMoney    | int  | SGT南向卖出资金   |
| hgtNorthNetInFlow    | int  | HGT北向资金净流入  |
| hgtNorthBalanceByDay | int  | HGT北向当日资金余额 |
| hgtSouthNetInFlow    | int  | HGT南向资金净流入  |
| hgtSouthBalanceByDay | int  | HGT南向当日资金余额 |
| sgtNorthNetInFlow    | int  | SGT北向资金净流入  |
| sgtNorthBalanceByDay | int  | SGT北向当日资金余额 |
| sgtSouthNetInFlow    | int  | SGT南向资金净流入  |
| sgtSouthBalanceByDay | int  | SGT南向当日资金余额 |

**示例1 通过内置python获取：**

示例返回值

```
# coding = gbk
def init(C):
    return
# 获取市场北向数据
def handlebar(C):
    print(C.get_north_finance_change('1d'))
```

#### 方式2：原生python

原生python

```
xtdata.get_market_data_ex(
    fields=[], 
    stock_code=[], 
    period='follow', 
    start_time='', 
    end_time='', 
    count=-1, 
    dividend_type='follow', 
    fill_data=True, 
    subscribe=True
    )
```

**参数**

| 名称              | 类型     | 描述                                                                                                                        |
| --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------- |
| `field`         | `list` | 取北向数据时填写为`[]`空列表即可                                                                                                        |
| `stock_list`    | `list` | 合约代码列表                                                                                                                    |
| `period`        | `str`  | `数据周期，可选字段为:`<br>`"northfinancechange1m"`：一分钟周期北向数据<br>`"northfinancechange1d"`：日线周期北向数据                                  |
| `start_time`    | `str`  | 数据起始时间，格式为 `%Y%m%d` 或 `%Y%m%d%H%M%S`，填`""`为获取历史最早一天                                                                       |
| `end_time`      | `str`  | 数据结束时间，格式为 `%Y%m%d` 或 `%Y%m%d%H%M%S` ，填`""`为截止到最新一天                                                                       |
| `count`         | `int`  | 数据个数                                                                                                                      |
| `dividend_type` | `str`  | 除权方式,可选值为<br>`'none'`：不复权<br>`'front'`:前复权<br>`'back'`:后复权<br>`'front_ratio'`: 等比前复权<br>`'back_ratio'`: 等比后复权<br>取此数据时不生效 |
| `fill_data`     | `bool` | 是否填充数据                                                                                                                    |
| `subscribe`     | `bool` | 订阅数据开关，默认为True，设置为False时不做数据订阅，只读取本地已有数据。                                                                                 |

**返回值**

返回一个 `{stock_code:pd.DataFrame}` 结构的`dict`对象，

**示例2 通过原生python获取：**

示例返回值

```
# 该示例演示token获取数据方式
from xtquant import xtdatacenter as xtdc

import xtquant.xtdata as xtdata

xtdc.set_token('这里输入token')
xtdc.init()

s = 'FFFFFF.SGT' # 北向资金代码
period = 'northfinancechange1m' # 数据周期
if 1:
    print('download')
    xtdata.download_history_data(s, period, '20231101', '')
    print('done')

data = xtdata.get_market_data_ex([], [s], period, '', '')[s]
print(data)
```

### 沪深港通持股数据

提示

1. 该数据是VIP权限数据
2. [VIP 权限数据](https://xuntou.net/#/productvip)

获取指定品种的持股明细

内置python

```
C.get_hkt_details(stockcode)
```

**参数：**

| 参数名称        | 数据类型     | 描述                  |
| ----------- | -------- | ------------------- |
| `stockcode` | `string` | 必须是'stock.market'形式 |

**返回结果：**

- 根据`stockcode`返回一个`dict`，该字典的key值是北向持股明细数据的时间戳，其值仍然是一个`dict`，其值的`key`值是北向持股明细数据的字段类型，其值是对应字段的值，该字典数据`key`值有：

| 参数名称                   | 数据类型/单位 | 描述                |
| ---------------------- | ------- | ----------------- |
| `stockCode`            | `str`   | 股票代码              |
| `ownSharesCompany`     | `str`   | 机构名称              |
| `ownSharesAmount`      | `int`   | 持股数量              |
| `ownSharesMarketValue` | `float` | 持股市值              |
| `ownSharesRatio`       | `float` | 持股数量占比            |
| `ownSharesNetBuy`      | `float` | 净买入金额（当日持股-前一日持股） |

**示例：**

示例返回值

```
# coding = gbk
def init(C):
    return
def handlebar(C):
    data = C.get_hkt_details('600000.SH')
    print(data)
```

## 交易所公告数据

### 原生Python

提示

1. 获取该数据前需要先调用`xtdata.download_history_data`进行下载，period参数选择`"announcement"`

2. 该数据通过`get_market_data_ex`接口获取，period参数选择`"announcement"`

3. 该数据是[VIP权限数据](https://xuntou.net/#/productvip)

**调用方法**

```
get_market_data_ex([],stock_list,period="announcement",start_time = "", end_time = "")
```

**参数**

| 参数名称         | 类型       | 描述                                                                                                                                                                                 |
| ------------ | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `field_list` | `list`   | 数据字段列表，传空则为全部字段                                                                                                                                                                    |
| `stock_list` | `list`   | 合约代码列表                                                                                                                                                                             |
| `period`     | `string` | 周期                                                                                                                                                                                 |
| `start_time` | `string` | 起始时间                                                                                                                                                                               |
| `end_time`   | `string` | 结束时间                                                                                                                                                                               |
| `count`      | `int`    | 数据个数。默认参数，大于等于0时，若指定了 `start_time`，`end_time`，此时以 `end_time` 为基准向前取 `count` 条；若 `start_time`，`end_time` 缺省，默认取本地数据最新的 `count` 条数据；若 `start_time`，`end_time`，`count` 都缺省时，默认取本地全部数据 |

**返回值**

返回一个 {`stock_code`:`pd.DataFrame`} 结构的`dict`对象，默认的列索引为取得的全部字段. 如果给定了 `fields` 参数, 则列索引与给定的 `fields` 对应.

**示例**

原生python返回值

```
from xtquant import xtdata
xtdata.download_history_data('600050.SH','announcement')

data = xtdata.get_market_data_ex([], ['600050.SH'], 'announcement', '', '')

d=data['600050.SH']

print(d.tail())
```

## 获取单季度/年度财务数据

查询股票的**市值数据、资产负债数据、现金流数据、利润数据、财务指标数据**. 详情通过[财务数据列表](http://docs.thinktrader.net/vip/pages/36f5df/#%E8%8E%B7%E5%8F%96%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE)查看! 可通过以下api进行查询 :

### 内置python

获取财务数据前，请先通过`界面端数据管理 - 财务数据`下载

![财务数据下载](https://dict.thinktrader.net/assets/%E5%86%85%E7%BD%AEAPI_%E4%B8%8B%E8%BD%BD%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE-61e927b9.png)

提示

财务数据接口通过读取下载本地的数据取数，使用前需要补充本地数据。除公告日期和报表截止日期为时间戳毫秒格式其他单位为元或 %，数据主要包括资产负债表(ASHAREBALANCESHEET)、利润表（ASHAREINCOME）、现金流量表（ASHARECASHFLOW）、股本表（CAPITALSTRUCTURE）的主要字段数据以及经过计算的主要财务指标数据（PERSHAREINDEX）。建议使用本文档对照表中的英文表名和迅投英文字段，表名不区分大小写。

#### ContextInfo.get_financial_data - 获取财务数据

财务数据接口有两种用法，入参和返回值不同，具体如下

##### 用法1，返回目标数据对象

**原型**

内置python

```
ContextInfo.get_financial_data(fieldList, stockList, startDate, enDate, report_type = 'announce_time')
```

**释义**

获取财务数据，方法1

**参数**

| 字段名           | 类型         | 释义与用例                                                                                  |
| ------------- | ---------- | -------------------------------------------------------------------------------------- |
| `fieldList`   | `List（必须）` | `财报字段列表：['ASHAREBALANCESHEET.fix_assets', '利润表.净利润']`                                  |
| `stockList`   | `List（必须）` | `股票列表：['600000.SH', '000001.SZ']`                                                      |
| `startDate`   | `Str（必须）`  | `开始时间：'20171209'`                                                                      |
| `endDate`     | `Str（必须）`  | `结束时间：'20171212'`                                                                      |
| `report_type` | `Str（可选）`  | `报表时间类型，可缺省，默认是按照数据的公告期为区分取数据，设置为 'report_time' 为按照报告期取数据，' announce_time' 为按照公告日期取数据` |

提示

选择按照公告期取数和按照报告期取数的区别：

若某公司当年 4 月 26 日发布上年度年报，如果选择按照公告期取数，则当年 4 月 26 日之后至下个财报发布日期之间的数据都是上年度年报的财务数据。

若选择按照报告期取数，则上年度第 4 季度（上年度 10 月 1 日 - 12 月 31 日）的数据就是上年度报告期的数据。

**返回值**

函数根据stockList代码列表,startDate,endDate时间范围，返回不同的的数据类型。如下：

| 代码数量 | 时间范围 | 返回类型                                                        |
| ---- | ---- | ----------------------------------------------------------- |
| =1   | =1   | pandas.Series (index = 字段)                                  |
| =1   | >1   | pandas.DataFrame (index = 时间, columns = 字段)                 |
| >1   | =1   | pandas.DataFrame (index = 代码, columns = 字段)                 |
| >1   | >1   | pandas.Panel (items = 代码, major_axis = 时间, minor_axis = 字段) |

**示例**

示例返回值

```
# coding:gbk
def init(C):
  pass

def handlebar(C):

  #取总股本和净利润
  fieldList = ['CAPITALSTRUCTURE.total_capital', '利润表.净利润']   
  stockList = ["000001.SZ","000002.SZ","430017.BJ"]
  startDate = '20171209'
  endDate = '20231204'
  data = C.get_financial_data(fieldList, stockList, startDate, endDate, report_type = 'report_time')
  print(data)
```

##### 用法2，返回目标数据单个值

**原型**

内置python

```
ContextInfo.get_financial_data(tabname, colname, market, code, report_type = 'report_time', barpos)
```

与用法 1 可同时使用

**释义**

获取财务数据，方法2

**参数**

| 字段名           | 类型        | 释义与用例                                                                                   |
| ------------- | --------- | --------------------------------------------------------------------------------------- |
| `tabname`     | `Str（必须）` | `表名：'ASHAREBALANCESHEET'`                                                               |
| `colname`     | `Str（必须）` | `字段名：'fix_assets'`                                                                      |
| `market`      | `Str（必须）` | `市场：'SH'`                                                                               |
| `code`        | `Str（必须）` | `代码：'600000'`                                                                           |
| `report_type` | `Str（可选）` | `报表时间类型，可缺省，默认是按照数据的公告期为区分取数据，设置为 'report_time' 为按照报告期取数据，' announce_time ' 为按照公告日期取数据` |
| `barpos`      | `number`  | `当前 bar 的索引`                                                                            |

**返回值**

`float` ：所取字段的数值

**示例**

示例返回值

```
# coding:gbk
def init(C):
  pass

def handlebar(C):
  index = C.barpos
  data = C.get_financial_data('ASHAREBALANCESHEET', 'fix_assets', 'SH', '600000', index)
  print(data)
```

#### ContextInfo.get_raw_financial_data - 获取原始财务数据

提示

取原始财务数据,与get_financial_data相比不填充每个交易日的数据

**原型**

内置python

```
ContextInfo.get_raw_financial_data(fieldList,stockList,startDate,endDate,report_type='announce_time')
```

**释义**

取原始财务数据,与get_financial_data相比不填充每个交易日的数据

**参数**

| 字段名           | 类型         | 释义与用例                                                                                    |
| ------------- | ---------- | ---------------------------------------------------------------------------------------- |
| `fieldList`   | `List（必须）` | 字段列表：例如 ['资产负债表.固定资产','利润表.净利润']                                                         |
| `stockList`   | `List（必须）` | 股票列表：例如['600000.SH','000001.SZ']                                                         |
| `startDate`   | `Str（必须）`  | 开始时间：例如 '20171209'                                                                       |
| `endDate`     | `Str（必须）`  | 结束时间：例如 '20171212'                                                                       |
| `report_type` | `Str（可选）`  | 时间类型，可缺省，默认是按照数据的公告期为区分取数据，设置为 'report_time' 为按照报告期取数据，可选值:'announce_time','report_time' |

**返回值**

函数根据stockList代码列表,startDate,endDate时间范围，返回不同的的数据类型。如下：

| 代码数量 | 时间范围 | 返回类型                                                        |
| ---- | ---- | ----------------------------------------------------------- |
| =1   | =1   | pandas.Series (index = 字段)                                  |
| =1   | >1   | pandas.DataFrame (index = 时间, columns = 字段)                 |
| >1   | =1   | pandas.DataFrame (index = 代码, columns = 字段)                 |
| >1   | >1   | pandas.Panel (items = 代码, major_axis = 时间, minor_axis = 字段) |

**示例**

示例返回值

```
#encoding:gbk
'''
获取财务数据
'''
import pandas as pd
import numpy as np
import talib

def to_zw(a):
    '''0.中文价格字符串'''
    import numpy as np
    try:
        header = '' if a > 0 else '-'
        if np.isnan(a):
            return '问题数据'
        if abs(a) < 1000:
            return header + str(int(a)) + "元"
        if abs(a) < 10000:
            return header + str(int(a))[0] + "千"
        if abs(a) < 100000000:
            return header + str(int(a))[:-4] + "万" + str(int(a))[-4] + '千'
        else:
            return header + str(int(a))[:-8] + "亿" + str(int(a))[-8:-4] + '万'
    except:
        print(f"问题数据{a}")
        return '问题数据'


def after_init(C):
    fieldList = ['ASHAREINCOME.net_profit_excl_min_int_inc','ASHAREINCOME.revenue'] # 字段表
    stockList = ['000001.SZ'] # 标的
    a=C.get_raw_financial_data(fieldList,stockList,'20150101','20300101',report_type = 'report_time') # 获取原始财务数据
    # print(a)
    for stock in a:
        for key in a[stock]:
            for t in a[stock][key]:
                print(key, timetag_to_datetime(int(t),'%Y%m%d'), to_zw(a[stock][key][t]))
            print('-' *22)
        print('-' *22)
```

### 原生python

python

```
from xtquant import xtdata
xtdata.get_financial_data(stock_list, table_list=[], start_time='', end_time='', report_type='report_time')
```

提示

选择按照公告期取数和按照报告期取数的区别：

若某公司当年 4 月 26 日发布上年度年报，如果选择按照公告期取数，则当年 4 月 26 日之后至下个财报发布日期之间的数据都是上年度年报的财务数据。

若选择按照报告期取数，则上年度第 4 季度（上年度 10 月 1 日 - 12 月 31 日）的数据就是上年度报告期的数据。

**参数**

| 参数名称          | 数据类型     | 描述                                                            |
| ------------- | -------- | ------------------------------------------------------------- |
| `stock_list`  | `list`   | 合约代码列表                                                        |
| `table_list`  | `list`   | 财务数据表名称列表,可选：`Balance` #资产负债表；`Income` #利润表；`CashFlow` #现金流量表 |
| `start_time`  | `string` | 起始时间                                                          |
| `end_time`    | `string` | 结束时间                                                          |
| `report_type` | `string` | 报表筛选方式,可选：`report_time` #截止日期；`announce_time` #披露日期           |

**返回**

- `dict` 数据集 { stock1 : datas1, stock2 : data2, ... }
  - stock1, stock2, ... # 合约代码
  - datas1, datas2, ... # dict 数据集 { table1 : table_data1, table2 : table_data2, ... }

**示例**

示例返回值

```
from xtquant import xtdata
# 取数据前请确保已下载所需要的财务数据
xtdata.download_financial_data(["000001.SZ","600519.SH","430017.BJ"], table_list=["Balance","Income"])
xtdata.get_financial_data(["000001.SZ","600519.SH","430017.BJ"],["Balance","Income"])
```

### 财务数据列表

#### 资产负债表

- 内置表名：ASHAREBALANCESHEET
- 原生表名：Balance

| 字段名                                   | 定义                     |
| ------------------------------------- | ---------------------- |
| m_anntime                             | 披露日期                   |
| m_timetag                             | 截止日期                   |
| internal_shoule_recv                  | 内部应收款                  |
| fixed_capital_clearance               | 固定资产清理                 |
| should_pay_money                      | 应付分保账款                 |
| settlement_payment                    | 结算备付金                  |
| receivable_premium                    | 应收保费                   |
| accounts_receivable_reinsurance       | 应收分保账款                 |
| reinsurance_contract_reserve          | 应收分保合同准备金              |
| dividends_payable                     | 应收股利                   |
| tax_rebate_for_export                 | 应收出口退税                 |
| subsidies_receivable                  | 应收补贴款                  |
| deposit_receivable                    | 应收保证金                  |
| apportioned_cost                      | 待摊费用                   |
| profit_and_current_assets_with_deal   | 待处理流动资产损益              |
| current_assets_one_year               | 一年内到期的非流动资产            |
| long_term_receivables                 | 长期应收款                  |
| other_long_term_investments           | 其他长期投资                 |
| original_value_of_fixed_assets        | 固定资产原值                 |
| net_value_of_fixed_assets             | 固定资产净值                 |
| depreciation_reserves_of_fixed_assets | 固定资产减值准备               |
| productive_biological_assets          | 生产性生物资产                |
| public_welfare_biological_assets      | 公益性生物资产                |
| oil_and_gas_assets                    | 油气资产                   |
| development_expenditure               | 开发支出                   |
| right_of_split_share_distribution     | 股权分置流通权                |
| other_non_mobile_assets               | 其他非流动资产                |
| handling_fee_and_commission           | 应付手续费及佣金               |
| other_payables                        | 其他应交款                  |
| margin_payable                        | 应付保证金                  |
| internal_accounts_payable             | 内部应付款                  |
| advance_cost                          | 预提费用                   |
| insurance_contract_reserve            | 保险合同准备金                |
| broker_buying_and_selling_securities  | 代理买卖证券款                |
| acting_underwriting_securities        | 代理承销证券款                |
| international_ticket_settlement       | 国际票证结算                 |
| domestic_ticket_settlement            | 国内票证结算                 |
| deferred_income                       | 递延收益                   |
| short_term_bonds_payable              | 应付短期债券                 |
| long_term_deferred_income             | 长期递延收益                 |
| undetermined_investment_losses        | 未确定的投资损失               |
| quasi_distribution_of_cash_dividends  | 拟分配现金股利                |
| provisions_not                        | 预计负债                   |
| cust_bank_dep                         | 吸收存款及同业存放              |
| provisions                            | 预计流动负债                 |
| less_tsy_stk                          | 减:库存股                  |
| cash_equivalents                      | 货币资金                   |
| loans_to_oth_banks                    | 拆出资金                   |
| tradable_fin_assets                   | 交易性金融资产                |
| derivative_fin_assets                 | 衍生金融资产                 |
| bill_receivable                       | 应收票据                   |
| account_receivable                    | 应收账款                   |
| advance_payment                       | 预付款项                   |
| int_rcv                               | 应收利息                   |
| other_receivable                      | 其他应收款                  |
| red_monetary_cap_for_sale             | 买入返售金融资产款              |
| agency_bus_assets                     | 以公允价值计量且其变动计入当期损益的金融资产 |
| inventories                           | 存货                     |
| other_current_assets                  | 其他流动资产                 |
| total_current_assets                  | 流动资产合计                 |
| loans_and_adv_granted                 | 发放贷款及垫款                |
| fin_assets_avail_for_sale             | 可供出售金融资产               |
| held_to_mty_invest                    | 持有至到期投资                |
| long_term_eqy_invest                  | 长期股权投资                 |
| invest_real_estate                    | 投资性房地产                 |
| accumulated_depreciation              | 累计折旧                   |
| fix_assets                            | 固定资产                   |
| constru_in_process                    | 在建工程                   |
| construction_materials                | 工程物资                   |
| long_term_liabilities                 | 长期负债                   |
| intang_assets                         | 无形资产                   |
| goodwill                              | 商誉                     |
| long_deferred_expense                 | 长期待摊费用                 |
| deferred_tax_assets                   | 递延所得税资产                |
| total_non_current_assets              | 非流动资产合计                |
| tot_assets                            | 资产总计                   |
| shortterm_loan                        | 短期借款                   |
| borrow_central_bank                   | 向中央银行借款                |
| loans_oth_banks                       | 拆入资金                   |
| tradable_fin_liab                     | 交易性金融负债                |
| derivative_fin_liab                   | 衍生金融负债                 |
| notes_payable                         | 应付票据                   |
| accounts_payable                      | 应付账款                   |
| advance_peceipts                      | 预收账款                   |
| fund_sales_fin_assets_rp              | 卖出回购金融资产款              |
| empl_ben_payable                      | 应付职工薪酬                 |
| taxes_surcharges_payable              | 应交税费                   |
| int_payable                           | 应付利息                   |
| dividend_payable                      | 应付股利                   |
| other_payable                         | 其他应付款                  |
| non_current_liability_in_one_year     | 一年内到期的非流动负债            |
| other_current_liability               | 其他流动负债                 |
| total_current_liability               | 流动负债合计                 |
| long_term_loans                       | 长期借款                   |
| bonds_payable                         | 应付债券                   |
| longterm_account_payable              | 长期应付款                  |
| grants_received                       | 专项应付款                  |
| deferred_tax_liab                     | 递延所得税负债                |
| other_non_current_liabilities         | 其他非流动负债                |
| non_current_liabilities               | 非流动负债合计                |
| tot_liab                              | 负债合计                   |
| cap_stk                               | 实收资本(或股本)              |
| cap_rsrv                              | 资本公积                   |
| specific_reserves                     | 专项储备                   |
| surplus_rsrv                          | 盈余公积                   |
| prov_nom_risks                        | 一般风险准备                 |
| undistributed_profit                  | 未分配利润                  |
| cnvd_diff_foreign_curr_stat           | 外币报表折算差额               |
| tot_shrhldr_eqy_excl_min_int          | 归属于母公司股东权益合计           |
| minority_int                          | 少数股东权益                 |
| total_equity                          | 所有者权益合计                |
| tot_liab_shrhldr_eqy                  | 负债和股东权益总计              |

#### 利润表

- 内置表名：ASHAREINCOME
- 原生表名：Income

| 字段名                               | 定义             |
| --------------------------------- | -------------- |
| m_anntime                         | 披露日期           |
| m_timetag                         | 截止日期           |
| revenue_inc                       | 营业收入           |
| earned_premium                    | 已赚保费           |
| real_estate_sales_income          | 房地产销售收入        |
| total_operating_cost              | 营业总成本          |
| real_estate_sales_cost            | 房地产销售成本        |
| research_expenses                 | 研发费用           |
| surrender_value                   | 退保金            |
| net_payments                      | 赔付支出净额         |
| net_withdrawal_ins_con_res        | 提取保险合同准备金净额    |
| policy_dividend_expenses          | 保单红利支出         |
| reinsurance_cost                  | 分保费用           |
| change_income_fair_value          | 公允价值变动收益       |
| futures_loss                      | 期货损益           |
| trust_income                      | 托管收益           |
| subsidize_revenue                 | 补贴收入           |
| other_business_profits            | 其他业务利润         |
| net_profit_excl_merged_int_inc    | 被合并方在合并前实现净利润  |
| int_inc                           | 利息收入           |
| handling_chrg_comm_inc            | 手续费及佣金收入       |
| less_handling_chrg_comm_exp       | 手续费及佣金支出       |
| other_bus_cost                    | 其他业务成本         |
| plus_net_gain_fx_trans            | 汇兑收益           |
| il_net_loss_disp_noncur_asset     | 非流动资产处置收益      |
| inc_tax                           | 所得税费用          |
| unconfirmed_invest_loss           | 未确认投资损失        |
| net_profit_excl_min_int_inc       | 归属于母公司所有者的净利润  |
| less_int_exp                      | 利息支出           |
| other_bus_inc                     | 其他业务收入         |
| revenue                           | 营业总收入          |
| total_expense                     | 营业成本           |
| less_taxes_surcharges_ops         | 营业税金及附加        |
| sale_expense                      | 销售费用           |
| less_gerl_admin_exp               | 管理费用           |
| financial_expense                 | 财务费用           |
| less_impair_loss_assets           | 资产减值损失         |
| plus_net_invest_inc               | 投资收益           |
| incl_inc_invest_assoc_jv_entp     | 联营企业和合营企业的投资收益 |
| oper_profit                       | 营业利润           |
| plus_non_oper_rev                 | 营业外收入          |
| less_non_oper_exp                 | 营业外支出          |
| tot_profit                        | 利润总额           |
| net_profit_incl_min_int_inc       | 净利润            |
| net_profit_incl_min_int_inc_after | 净利润(扣除非经常性损益后) |
| minority_int_inc                  | 少数股东损益         |
| s_fa_eps_basic                    | 基本每股收益         |
| s_fa_eps_diluted                  | 稀释每股收益         |
| total_income                      | 综合收益总额         |
| total_income_minority             | 归属于少数股东的综合收益总额 |
| other_compreh_inc                 | 其他收益           |

#### 现金流表

- 内置表名：ASHARECASHFLOW
- 原生表名: CashFlow

| 字段名                                 | 定义                      |
| ----------------------------------- | ----------------------- |
| m_anntime                           | 披露日期                    |
| m_timetag                           | 截止日期                    |
| cash_received_ori_ins_contract_pre  | 收到原保险合同保费取得的现金          |
| net_cash_received_rei_ope           | 收到再保险业务现金净额             |
| net_increase_insured_funds          | 保户储金及投资款净增加额            |
| net_increase_in_disposal            | 处置交易性金融资产净增加额           |
| cash_for_interest                   | 收取利息、手续费及佣金的现金          |
| net_increase_in_repurchase_funds    | 回购业务资金净增加额              |
| cash_for_payment_original_insurance | 支付原保险合同赔付款项的现金          |
| cash_payment_policy_dividends       | 支付保单红利的现金               |
| disposal_other_business_units       | 处置子公司及其他收到的现金           |
| cash_received_from_pledges          | 减少质押和定期存款所收到的现金         |
| cash_paid_for_investments           | 投资所支付的现金                |
| net_increase_in_pledged_loans       | 质押贷款净增加额                |
| cash_paid_by_subsidiaries           | 取得子公司及其他营业单位支付的现金净额     |
| increase_in_cash_paid               | 增加质押和定期存款所支付的现金         |
| cass_received_sub_abs               | 其中子公司吸收现金               |
| cass_received_sub_investments       | 其中:子公司支付给少数股东的股利、利润     |
| minority_shareholder_profit_loss    | 少数股东损益                  |
| unrecognized_investment_losses      | 未确认的投资损失                |
| ncrease_deferred_income             | 递延收益增加(减:减少)            |
| projected_liability                 | 预计负债                    |
| increase_operational_payables       | 经营性应付项目的增加              |
| reduction_outstanding_amounts_less  | 已完工尚未结算款的减少(减:增加)       |
| reduction_outstanding_amounts_more  | 已结算尚未完工款的增加(减:减少)       |
| goods_sale_and_service_render_cash  | 销售商品、提供劳务收到的现金          |
| net_incr_dep_cob                    | 客户存款和同业存放款项净增加额         |
| net_incr_loans_central_bank         | 向中央银行借款净增加额(万元)         |
| net_incr_fund_borr_ofi              | 向其他金融机构拆入资金净增加额         |
| net_incr_fund_borr_ofi              | 拆入资金净增加额                |
| tax_levy_refund                     | 收到的税费与返还                |
| cash_paid_invest                    | 投资支付的现金                 |
| other_cash_recp_ral_oper_act        | 收到的其他与经营活动有关的现金         |
| stot_cash_inflows_oper_act          | 经营活动现金流入小计              |
| goods_and_services_cash_paid        | 购买商品、接受劳务支付的现金          |
| net_incr_clients_loan_adv           | 客户贷款及垫款净增加额             |
| net_incr_dep_cbob                   | 存放中央银行和同业款项净增加额         |
| handling_chrg_paid                  | 支付利息、手续费及佣金的现金          |
| cash_pay_beh_empl                   | 支付给职工以及为职工支付的现金         |
| pay_all_typ_tax                     | 支付的各项税费                 |
| other_cash_pay_ral_oper_act         | 支付其他与经营活动有关的现金          |
| stot_cash_outflows_oper_act         | 经营活动现金流出小计              |
| net_cash_flows_oper_act             | 经营活动产生的现金流量净额           |
| cash_recp_disp_withdrwl_invest      | 收回投资所收到的现金              |
| cash_recp_return_invest             | 取得投资收益所收到的现金            |
| net_cash_recp_disp_fiolta           | 处置固定资产、无形资产和其他长期投资收到的现金 |
| other_cash_recp_ral_inv_act         | 收到的其他与投资活动有关的现金         |
| stot_cash_inflows_inv_act           | 投资活动现金流入小计              |
| cash_pay_acq_const_fiolta           | 购建固定资产、无形资产和其他长期投资支付的现金 |
| other_cash_pay_ral_oper_act         | 支付其他与投资的现金              |
| stot_cash_outflows_inv_act          | 投资活动现金流出小计              |
| net_cash_flows_inv_act              | 投资活动产生的现金流量净额           |
| cash_recp_cap_contrib               | 吸收投资收到的现金               |
| cash_recp_borrow                    | 取得借款收到的现金               |
| proc_issue_bonds                    | 发行债券收到的现金               |
| other_cash_recp_ral_fnc_act         | 收到其他与筹资活动有关的现金          |
| stot_cash_inflows_fnc_act           | 筹资活动现金流入小计              |
| cash_prepay_amt_borr                | 偿还债务支付现金                |
| cash_pay_dist_dpcp_int_exp          | 分配股利、利润或偿付利息支付的现金       |
| other_cash_pay_ral_fnc_act          | 支付其他与筹资的现金              |
| stot_cash_outflows_fnc_act          | 筹资活动现金流出小计              |
| net_cash_flows_fnc_act              | 筹资活动产生的现金流量净额           |
| eff_fx_flu_cash                     | 汇率变动对现金的影响              |
| net_incr_cash_cash_equ              | 现金及现金等价物净增加额            |
| cash_cash_equ_beg_period            | 期初现金及现金等价物余额            |
| cash_cash_equ_end_period            | 期末现金及现金等价物余额            |
| net_profit                          | 净利润                     |
| plus_prov_depr_assets               | 资产减值准备                  |
| depr_fa_coga_dpba                   | 固定资产折旧、油气资产折耗、生产性物资折旧   |
| amort_intang_assets                 | 无形资产摊销                  |
| amort_lt_deferred_exp               | 长期待摊费用摊销                |
| decr_deferred_exp                   | 待摊费用的减少                 |
| incr_acc_exp                        | 预提费用的增加                 |
| loss_disp_fiolta                    | 处置固定资产、无形资产和其他长期资产的损失   |
| loss_scr_fa                         | 固定资产报废损失                |
| loss_fv_chg                         | 公允价值变动损失                |
| fin_exp                             | 财务费用                    |
| invest_loss                         | 投资损失                    |
| decr_deferred_inc_tax_assets        | 递延所得税资产减少               |
| incr_deferred_inc_tax_liab          | 递延所得税负债增加               |
| decr_inventories                    | 存货的减少                   |
| decr_oper_payable                   | 经营性应收项目的减少              |
| others                              | 其他                      |
| im_net_cash_flows_oper_act          | 经营活动产生现金流量净额            |
| conv_debt_into_cap                  | 债务转为资本                  |
| conv_corp_bonds_due_within_1y       | 一年内到期的可转换公司债券           |
| fa_fnc_leases                       | 融资租入固定资产                |
| end_bal_cash                        | 现金的期末余额                 |
| less_beg_bal_cash                   | 现金的期初余额                 |
| plus_end_bal_cash_equ               | 现金等价物的期末余额              |
| less_beg_bal_cash_equ               | 现金等价物的期初余额              |
| im_net_incr_cash_cash_equ           | 现金及现金等价物的净增加额           |
| tax_levy_refund                     | 收到的税费返还                 |

#### 股本表

- 内置表名：CAPITALSTRUCTURE
- 原生表名：Capital

| **中文字段** | **迅投字段**                     |
| -------- | ---------------------------- |
| 总股本      | total_capital                |
| 已上市流通A股  | circulating_capital          |
| 限售流通股份   | restrict_circulating_capital |
| 变动日期     | m_timetag                    |
| 公告日      | m_anntime                    |

#### 主要指标

- 内置表名：PERSHAREINDEX
- 原生表名：PershareIndex

| **中文字段**          | **迅投字段**                              |
| ----------------- | ------------------------------------- |
| 每股经营活动现金流量        | s_fa_ocfps                            |
| 每股净资产             | s_fa_bps                              |
| 基本每股收益            | s_fa_eps_basic                        |
| 稀释每股收益            | s_fa_eps_diluted                      |
| 每股未分配利润           | s_fa_undistributedps                  |
| 每股资本公积金           | s_fa_surpluscapitalps                 |
| 扣非每股收益            | adjusted_earnings_per_share           |
| 净资产收益率            | du_return_on_equity                   |
| 销售毛利率             | sales_gross_profit                    |
| 主营收入同比增长          | inc_revenue_rate                      |
| 净利润同比增长           | du_profit_rate                        |
| 归属于母公司所有者的净利润同比增长 | inc_net_profit_rate                   |
| 扣非净利润同比增长         | adjusted_net_profit_rate              |
| 营业总收入滚动环比增长       | inc_total_revenue_annual              |
| 归属净利润滚动环比增长       | inc_net_profit_to_shareholders_annual |
| 扣非净利润滚动环比增长       | adjusted_profit_to_profit_annual      |
| 加权净资产收益率          | equity_roe                            |
| 摊薄净资产收益率          | net_roe                               |
| 摊薄总资产收益率          | total_roe                             |
| 毛利率               | gross_profit                          |
| 净利率               | net_profit                            |
| 实际税率              | actual_tax_rate                       |
| 预收款营业收入           | pre_pay_operate_income                |
| 销售现金流营业收入         | sales_cash_flow                       |
| 资产负债比率            | gear_ratio                            |
| 存货周转率             | inventory_turnover                    |

#### 十大股东/十大流通股东

- 内置表名：TOP10HOLDER/TOP10FLOWHOLDER
- 原生表名：Top10holder/Top10flowholder

| **中文字段** | **迅投字段**      |
| -------- | ------------- |
| `公告日期`   | `declareDate` |
| `截止日期`   | `endDate`     |
| `股东名称`   | `name`        |
| `股东类型`   | `type`        |
| `持股数量`   | `quantity`    |
| `变动原因`   | `reason`      |
| `持股比例`   | `ratio`       |
| `股份性质`   | `nature`      |
| `持股排名`   | `rank`        |

#### 股东数

- 内置表名：SHAREHOLDER
- 原生表名：Holdernum

| **中文字段**  | **迅投字段**           |
| --------- | ------------------ |
| `公告日期`    | `declareDate`      |
| `截止日期`    | `endDate`          |
| `股东总数`    | `shareholder`      |
| `A股东户数`   | `shareholderA`     |
| `B股东户数`   | `shareholderB`     |
| `H股东户数`   | `shareholderH`     |
| `已流通股东户数` | `shareholderFloat` |
| `未流通股东户数` | `shareholderOther` |

## 获取行业概念数据

提示

获取行业/板块信息前，需要先通过`download_sector_data`下载板块分类信息，或者在界面端下载中心手动选择`全部板块`

提供行业板块信息，概念板块信息，包含行业代码、名称等。

### 下载板块分类信息

**调用方法**

python

```
from xtquant import xtdata
xtdata.download_sector_data()
```

**参数**

- 无

**返回值**

- 无

**示例**

示例

```
from xtquant import xtdata
xtdata.download_sector_data()
```

### 下载历史板块分类信息

**调用方法**

python

```
from xtquant import xtdata
xtdata.download_history_contracts()
```

**参数**

- 无

**返回值**

- 无

**示例**

示例

```
from xtquant import xtdatacenter as xtdc  

xtdc.set_token("这里输入token")

xtdc.init()

from xtquant import xtdata

xtdata.download_history_contracts()
```

### 获取板块分类信息数据

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_sector_list()
```

**参数**

- 无

**返回值**

- `list`：所有板块的列表信息(包含过期板块)，可以配合板块成分股查询接口使用

**示例**

示例返回值

```
from xtquant import xtdata
sector_list = xtdata.get_sector_list()
```

### 获取板块成分股数据

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_stock_list_in_sector(sector_name)
```

**参数**

| 参数名称          | 数据类型     | 描述                                  |
| ------------- | -------- | ----------------------------------- |
| `sector_name` | `string` | 板块名，如'沪深300'，'中证500'、'上证50'、'我的自选'等 |

**返回值**

- `list`：内含成份股代码，代码形式为 'stockcode.market'，如 '000002.SZ'

**示例1:获取当最新板块数据**

示例返回值

```
# 获取沪深300的板块成分股
from xtquant import xtdata
sector = xtdata.get_stock_list_in_sector('沪深300')
print(sector)
```

**示例2:获取板块退市股票数据**

示例返回值

```
from xtquant import xtdatacenter as xtdc  

xtdc.set_token("这里输入token")

xtdc.init()


from xtquant import xtdata

xtdata.download_history_contracts()

print([i for i in xtdata.get_sector_list() if "过期" in i])

print("="*10)

print(xtdata.get_stock_list_in_sector('过期上证A股'))
```

### 获取概念成分股数据

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_stock_list_in_sector(sector_name)
```

**参数**

| 参数名称          | 数据类型     | 描述           |
| ------------- | -------- | ------------ |
| `sector_name` | `string` | 板块名，如'GN上海'等 |

**返回值**

- `list`：内含成份股代码，代码形式为 'stockcode.market'，如 '000002.SZ'

**示例**

示例返回值

```
# 获取GN上海的板块成分股
from xtquant import xtdata
sector = xtdata.get_stock_list_in_sector('GN上海')
print(sector)
```

### 获取迅投行业成分股数据

**调用方法**

python

```
from xtquant import xtdata
xtdata.get_stock_list_in_sector(sector_name)
```

**参数**

| 参数名称          | 数据类型     | 描述            |
| ------------- | -------- | ------------- |
| `sector_name` | `string` | 板块名，如'SW1汽车'等 |

**返回值**

- `list`：内含成份股代码，代码形式为 'stockcode.market'，如 '000002.SZ'

**示例**

示例返回值

```
# 获取SW1汽车行业的成分股
from xtquant import xtdata

sector = xtdata.get_stock_list_in_sector('SW1汽车')
print(sector)
```

上次更新: 2025/2/17 19:21:13

## 关于迅投指数计算规则的说明

指数数据计算规则说明

迅投指数的计算规则为

1. 普通代码上市超过20个交易日后加入计算，债券为5个交易日。
2. 涨停打开超过3个交易日后加入计算。
3. 复牌股涨跌幅超25%不加入计算。
4. 指数成分等权进行计算。

## 获取沪深指数数据

### 获取指数代码列表

提示

为了获取指数合约列表,首先需要使用函数`get_sector_list`来获取需要查询的指数索引。具体的索引信息可以通过键入您感兴趣的索引名（例如："沪深指数"或"上证指数"）等获得。接下来，通过调用函数`get_stock_list_in_sector`并输入指定的索引名称，你就可以返回相应的指数合约列表。这部分合约列表包含了所有与特定指数相关的现有合约，这对于投资者在进行投资策略分析和决策时具有重要参考价值。

**调用方法**

python

```
# coding=utf-8
from xtquant import xtdata
# 获取板块列表
xtdata.get_sector_list()
# 根据板块列表找查询指数索引名称
xtdata.get_stock_list_in_sector(sector_name)
```

**参数**

| 字段            | 类型       | 说明     |
| ------------- | -------- | ------ |
| `sector_name` | `string` | `板块名称` |

**返回**

- 列表，包含指定板块成分代码。

示例返回值(板块列表)返回值(板块数据)

```
# coding=utf-8
from xtquant import xtdata
# 获取板块列表
ret_sector_list = xtdata.get_sector_list()
print(f'获取板块目录: {ret_sector_list}')
# 根据板块列表找查询指数索引名称
ret_sector_data = xtdata.get_stock_list_in_sector('沪深指数')
print(f'获取板块合约: {ret_sector_data}')
```

### 获取指数成份股权重

如果你的本地环境中缺少合约权重数据，那么可以先通过函数`download_index_weight`进行数据下载。下载后,再使用`get_index_weight`函数来取得相关指数下各个合约的权重信息。这两步操作能帮助你获得详尽而全面的权重数据，进一步增强你对投资环境的理解和掌握，帮助做出更明智的投资决策。

**调用方法**

python

```
# coding=utf-8
from xtquant import xtdata
# 下载权重相关信息
xtdata.download_index_weight()
# 获取权重相关信息
xtdata.get_index_weight(index_code)
```

**参数**

| 字段           | 类型       | 说明     |
| ------------ | -------- | ------ |
| `index_code` | `string` | `指数代码` |

- index_code:字符串格式,指数代码,例如 000300.SH

**返回**

- 字典, key为成分代码, value为权重

示例返回值

```
# coding=utf-8
from xtquant import xtdata
# 下载权重相关信息
xtdata.download_index_weight()
# 获取权重相关信息
ret_weight_data = xtdata.get_index_weight('000300.SH')
print(ret_weight_data)
```

### 获取指数行情数据

获取行情数据，最新行情需要数据订阅`subscribe_quote`。如果您需要获取历史数据，可以使用`download_history_data`函数下载相关数据，然后使用`get_market_data_ex`函数提取所需的信息。这样，使用者就能获得最新和详细的合约最新数据，有助于做出更精准的投资决策。

**调用方法**

python

```
# coding=utf-8
from xtquant import xtdata
# 订阅指定合约最新行情
xtdata.subscribe_quote(stock_code, period='', start_time='', end_time='', count=0, callback=None)
# 下载指定合约历史行情
xtdata.download_history_data(stock_code, period, start_time='', end_time='')
# 获取指定合约历史行情
xtdata.get_market_data_ex(field_list = [], stock_list = [], period = '', start_time = '', end_time = '', count = -1, dividend_type = 'none', fill_data = True)
```

**参数**

- xtdata.subscribe_quote

| 字段           | 类型    | 说明                                |
| ------------ | ----- | --------------------------------- |
| `stock_code` | `str` | `股票代码`                            |
| `start_time` | `str` | `开始时间格式YYYYMMDD/YYYYMMDDhhmmss`   |
| `end_time`   | `str` | `结束时间`                            |
| `count`      | `int` | `数量 -1全部/n: 从结束时间向前数n个`           |
| `period`     | `str` | `周期 分笔"tick" 分钟线"1m"/"5m" 日线"1d"` |

- xtdata.get_market_data_ex

| 参数名称            | 类型     | 描述                                                                                                                                                                                                                                                                 |
| --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `field_list`    | `list` | 表示所有字段。不同的数据周期，取值范围有所不同。                                                                                                                                                                                                                                           |
| `stock_list`    | `list` | 合约代码列表                                                                                                                                                                                                                                                             |
| `period`        | `str`  | 数据周期，默认是当前主图周期。可选值如下： 'tick' (分笔线)， '1d' (日线)， '1m' (1分钟线)， '5m' (5分钟线)， '15m' (15分钟线)， 'l2quote' (Level2行情快照)， 'l2quoteaux' (Level2行情快照补充)， 'l2order' (Level2逐笔委托)， 'l2transaction' (Level2逐笔成交)，'l2transactioncount' (Level2大单统计)， 'l2orderqueue' (Level2委买委卖队列) |
| `start_time`    | `str`  | 开始时间。为空时默认为最早时间。时间格式为'20201231'或'20201231093000'                                                                                                                                                                                                                   |
| `end_time`      | `str`  | 结束时间。为空时默认为最新时间。时间格式为'20201231'或'20201231235959'                                                                                                                                                                                                                   |
| `count`         | `int`  | 数据最大个数。-1表示不做个数限制                                                                                                                                                                                                                                                  |
| `dividend_type` | `str`  | 复权方式，默认是当前主图复权方式。可选值包括： 'none' (不复权)， 'front'(前复权)， 'back' (后复权)， 'front_ratio' (等比前复权)， 'back_ratio' (等比后复权)                                                                                                                                                      |
| `fill_data`     | `bool` | 停牌填充方式                                                                                                                                                                                                                                                             |

**返回值**

- period为`1m` `5m` `1d`K线周期时
  - 返回dict { field1 : value1, field2 : value2, ... }
  - value1, value2, ... ：pd.DataFrame 数据集，index为stock_list，columns为time_list
  - 各字段对应的DataFrame维度相同、索引相同
- period为`tick`分笔周期时
  - 返回dict { stock1 : value1, stock2 : value2, ... }
  - stock1, stock2, ... ：合约代码
  - value1, value2, ... ：np.ndarray 数据集，按数据时间戳`time`增序排列

示例返回值

```
# coding=utf-8
from xtquant import xtdata
# 获取迅投板块指数代码列表
xt_sector_index_list = xtdata.get_stock_list_in_sector("迅投一级行业板块加权指数")
# 获取迅投板块指数合约信息
xt_sector_index_info = xtdata.get_instrument_detail(xt_sector_index_list[0])
xt_sector_index = xt_sector_index_list[0]
print(xt_sector_index_info)
# 订阅合约数据
xtdata.subscribe_quote(xt_sector_index, period='1d', start_time='', end_time='20231026', count=1, callback=None)
# 下载指定合约历史行情
xtdata.download_history_data(xt_sector_index, '1d', '20231020', '20231026')
# 获取指定合约历史行情
day_data = xtdata.get_market_data_ex(field_list=[], stock_list=[xt_sector_index], period='1d', start_time='',end_time='20231026',  count=5, dividend_type='none', fill_data=True)
print(day_data)
```

### 获取指数tick数据

获取全推tick数据的函数是用户主动调用的工具。所谓"全推tick数据"，指的是以tick（最小报价单位）为单位的实时市场数据，包括每一笔交易的信息，如成交金额、成交量、收盘价等。通过主动调用这个函数，用户能实时获得最新的市场动态，从而做出及时和准确的投资决策。

**调用方法**

python

```
# coding=utf-8
from xtquant import xtdata
xtdata.get_full_tick(code_list)
```

**参数**

| 字段          | 类型     | 说明     |
| ----------- | ------ | ------ |
| `code_list` | `list` | `合约列表` |

- code_list:字符串格式, 例如 ['000001.SH', '000300.SH']

**返回值**

- dict 数据集 { stock1 : tick1, stock2 : tick2, ... }, tick字段如下

| 字段                  | 类型    | 说明     |
| ------------------- | ----- | ------ |
| timetag             | str   | 时间     |
| lastPrice           | float | 最新价    |
| open                | float | 开盘价    |
| low                 | float | 最低价    |
| amount              | float | 成交额    |
| volume              | int   | 成交总量   |
| pvolume             | int   | 原始成交总量 |
| openInt             | int   | 持仓量    |
| stockStatus         | str   | 证券状态   |
| lastClose           | float | 前收盘价   |
| lastSettlementPrice | float | 前结算价   |
| settlementPrice     | float | 今结算价   |
| askPrice            | list  | 多档委卖价  |
| bidPrice            | list  | 多档委买价  |
| askVol              | list  | 多档委卖量  |
| bidVol              | list  | 多档委买量  |

示例返回值

```
# coding=utf-8
from xtquant import xtdata

# 获取迅投板块指数代码列表
xt_sector_index_list = xtdata.get_stock_list_in_sector("迅投一级行业板块加权指数")
# 获取迅投板块指数信息
xt_sector_index_info = xtdata.get_instrument_detail(xt_sector_index_list[0])
# 获取迅投板块指数tick数据
ret_full_tick = xtdata.get_full_tick([xt_sector_index])
print(ret_full_tick)
```

## 获取迅投商品市场指数行情数据

提示

1.获取迅投商品市场指数行情数据，如要获取历史数据需要进行下载`download_history_data`,再根据函数`get_market_data_ex`获取  
2.[VIP 权限数据](https://xuntou.net/#/productvip)

**调用方法**

python

```
# coding=utf-8
from xtquant import xtdata
# 下载合约
xtdata.download_history_data(stock_code,period = "1d")
# 获取迅投商品市场指数行情数据
xtdata.get_market_data_ex([],[stock_code],period='1d')
```

**参数**

| 字段           | 类型    | 说明     |
| ------------ | ----- | ------ |
| `stock_code` | `str` | `合约列表` |

**返回值**

- period为`1m` `5m` `1d`K线周期时
  - 返回dict { field1 : value1, field2 : value2, ... }
  - value1, value2, ... ：pd.DataFrame 数据集，index为stock_list，columns为time_list
  - 各字段对应的DataFrame维度相同、索引相同
- period为`tick`分笔周期时
  - 返回dict { stock1 : value1, stock2 : value2, ... }
  - stock1, stock2, ... ：合约代码
  - value1, value2, ... ：np.ndarray 数据集，按数据时间戳`time`增序排列

示例返回值

```
# coding=utf-8
from xtquant import xtdata
xtdata.download_history_data('290000.BKZS',period = "1d")
# 获取迅投商品市场指数行情数据
xtdata.get_market_data_ex([],['290000.BKZS'],period='1d')
```

上次更新: 2023/11/28 18:06:00

## Token 使用相关

### 无法连接 xtquant 服务

**描述：**

`Exception: 无法连接xtquant服务，请检查QMT-投研版或QMT-极简版是否开启`

提示

您未成功启动数据服务或请检查端口是否正确填写`port=XXXXX`。

### Token 失效后是否再次订阅

**描述：**

如果token刷新失效后，换成新的token，是否需要再次进行订阅操作？

提示

需要让`xtdatacenter`调整token后重新连接行情，这个可以直接重启`xtdatacenter`的进程，这会导致下游的`xtdata`连接断开，断开后重连上需要重新订阅

## 获取行情相关

### k 线数据缺失

**描述：**

获取到的数据 1m 的 K 线数据缺失。

提示

如果是`get_market_data_ex`获取K线可以用fill_data=True来填充。

这个填充现在只对 k 线这种标准的数据做了，其他的特色数据没有处理填充的操作。

因此其他函数如果在获取k线数据的时候，如果存在数据缺失，用`fill_data=True`来填充，并不适用。

### 订阅数据相关

**描述：**

盘中订阅完行情全推后，切换行情站点需要重新订阅吗？

提示

1. 对于内置python策略来说，需要重新订阅
2. 对于xtquant.xtdata来说，不需要重新订阅，除非xtdata断开

### 数据更新时间相关

**描述：**

收盘后什么时候能够下载到完整的当日行情数据

提示

股票收盘有两个时间点

大部分股票是 15:00，在交易所撮合尾盘竞价成交后下发行情，一般会延后几秒，大约是15:00:03左右

创业板、科创板有盘后定价交易，如果需要获取这部分数据的话，在15:30收盘之后获取，不需要的话也在15:00获取

期货一般在15:00收盘后有最新的收盘价，在16:30左右有结算价

上次更新: 2025/1/6 18:26:57

## 场景化示例

### 判断市场状态，获取市场最新分钟K线

```
import pandas as pd
from xtquant import xtdata

market = 'SH'

# 获取市场的品种列表
sl = xtdata.get_stock_list_in_sector(market)

def on_data(datas):
    # 获取当前市场时间
    # 根据推送的数据统计最新的tick时间作为当前市场时间
    market_time = max([datas[i]["time"] for i in datas])

    # 判断是否到达57秒，认为这时的分钟K线已经结束
    if market_time % 60 >= 57:
        print('reach 57 seconds, market_time:' + str(market_time))

        # 获取这个时刻的分钟K线数据
        data = xtdata.get_full_kline([], sl, '1m')
        print(data)
    return


# 订阅全推数据
xtdata.subscribe_whole_quote([market], callback = on_data)

# 保持程序运行
xtdata.run()
```

### 盘前数据准备

```
from xtquant import xtdata
from datetime import datetime,timedelta
import time
from tqdm import tqdm

## 交易日切换判断

def trading_date_is_change(market_list = ['SH', 'SZ']) -> bool: 
    """判断交易日是否切换，当全部交易市场都完成交易日切换后，返回True

    Args:
        market_list (list, optional): 交易市场，市场分类参考 https://dict.thinktrader.net/innerApi/variable_convention.html?id=7zqjlm
    Return:
        bool
    """

    market_list = ['SH', 'SZ', 'BJ']
    ls = [0,0,0]
    now_date = datetime.now().date()
    for i in range(len(market_list)):
        market = market_list[i]
        trading_dates = xtdata.get_trading_dates(market)
        if trading_dates:
            if datetime.fromtimestamp(trading_dates[-1] / 1000).date() == now_date:
                print(f'trading date switch success, market: {market}, trading date: {now_date}')
                ls[i] = 1
            else:
                print(f"{market} -- 交易日未切换")

    if all(ls):
        return True
    else:
        return False

def update_sector_data() -> None:
    """更新静态数据，包含板块数据
    静态数据是指在当天交易日内不会变化，或基本不会变化的数据（如合约信息可能会盘中少量更新，可忽略）
        交易日列表 合约列表（合约信息）    <- 当日自动更新
        复权数据    <- 当日自动更新
        板块列表、板块成分   <- 需要每天执行下载
    """

    xtdata.download_sector_data() # 下载当日板块数据
    xtdata.download_index_weight() # 更新指数权重数据
    xtdata.download_history_contracts() # 下载过期合约数据，包含退市标的信息


def update_kline_data(sector_name:str ,period_list:list, start_time:str = "", end_time:str = "", incrementally:bool = True) -> None:
    """xtquant历史数据都是以压缩形式存储在本地的，get_market_data函数与get_market_data_ex函数将会自动拼接本地历史行情与服务器实时行情

    Args:
        sector_name (str): 板块名称，如"沪深A股"
        period_list (list): 支持的周期参考 https://dict.thinktrader.net/innerApi/data_function.html?id=7zqjlm#download-history-data
        start_time (str): 开始时间
            格式为 YYYYMMDD 或 YYYYMMDDhhmmss 或 ''
            例如：'20230101' '20231231235959'
            空字符串代表全部，自动扩展到完整范围
        end_time (str): 结束时间 格式同开始时间
        incrementally (bool): 是否增量下载

    Raises:
        KeyError: _description_
    """
    ls = xtdata.get_stock_list_in_sector(sector_name)
    if len(ls) == 0:
        raise KeyError("股票列表长度为0,板块可能不存在，或数据未更新")
    for period in period_list:
        for stock in tqdm(ls,f"{period} 数据"):
            xtdata.download_history_data(stock,period,start_time,end_time,incrementally)


def update_financial_data(sector_name:str) -> None:
    """
    Args:
        sector_name (str): 板块名称，如"沪深A股"
    """
    ls = xtdata.get_stock_list_in_sector(sector_name)
    for stock in tqdm(ls,f"更新财务数据"):
        xtdata.download_financial_data(stock)


def is_trade_time(trading_time_info) -> bool:
    '''
    Args:
        trading_time_info:格式需要如下
            stock : (["09:30:00","11:30:00"],["13:00:00","15:00:00"])
            future : (["09:00:00","10:15:00"],["10:30:00","11:30:00"],["13:30:00","15:00:00"],["21:00:00","26:30:00"])
    return:bool
    '''

    _now = int((datetime.datetime.now() - datetime.timedelta(hours=4)).strftime("%H%M%S"))
    for _time_list_ in trading_time_info:
        st_str = _time_list_[0]
        _sp_st = (int(st_str.split(":")[0]) - 4) * 10000 + (int(st_str.replace(":", "")) % 10000)
        et_str = _time_list_[1]
        _sp_et = (int(et_str.split(":")[0]) - 4) * 10000 + (int(et_str.replace(":", "")) % 10000)

        if _sp_st <= _now < _sp_et:
            return True
    return False

def trade_logic():
    """具体策略逻辑，写法参考 https://dict.thinktrader.net/nativeApi/code_examples.html?id=7zqjlm#%E4%BA%A4%E6%98%93%E7%A4%BA%E4%BE%8B
    """
    pass

if __name__ == "__main__":
    while not trading_date_is_change(["SH","SZ"]):
        print("休眠60s")
        time.sleep(60)
    # 更新板块信息
    update_sector_data()
    # 更新财务数据
    update_financial_data("沪深A股")
    # 更新历史K线数据
    # 当前交易日的数据来自服务器，历史交易日的数据来自本地
    # 实时K线数据需要通过subscribe_quote订阅,get_market_data_ex函数将会自动拼接本地历史行情与服务器实时行情
    update_kline_data("沪深A股",["1d"],"","",True)


    ## 非交易时间过滤
    while not is_trade_time((["09:30:00","11:30:00"],["13:00:00","15:00:00"])):
        print("非交易时间")
        time.sleep(3)

    while 1:
        # 固定3s判断一次交易逻辑
        trade_logic()
        time.sleep(3)
```

上次更新: 2024/10/28 17:27:02

### 因子数据下载

```
from xtquant import xtdata

xtdata.download_metatable_data() # 更新因子列表

metainfo = xtdata.get_metatable_list() # 获取因子对照字典，结构是{英文因子表名:中文因子表名}

metainfo_rev = {v:k for k,v in metainfo.items()} # 转置使结构变为{中文因子表名:英文因子表名}

zn_factor_name = "质量类因子" 

xtdata.download_history_data('XXXXXX.XX', metainfo_rev[zn_factor_name], '', '', incrementally=False) # 下载质量类因子数据
```

### 因子数据获取

#### 在python中获取

```
import pandas as pd
import os
path = "{安装目录}\\datadir\\EP"

factor_name = "{factor_name}"

data_file = os.path.join(path,factor_name + "_Xdat2","data.fe")

factor_data = pd.read_feather(data_file)

print(factor_data)
```

#### 在因子公式中获取

```
factor_type := '{因子分类}';
factor_name := '{因子名称}';

// 获取当前标的的因子值
factor_value :=EXTDATA2(factor_type,factor_name,'');

// 获取当前品种在该因子中的正序排名
factor_rank := EXTDATARANK2(factor_type,factor_name,'',0)

// 获取当前品种在该因子中,指定板块范围的正序排名
factor_rank := EXTDATABLOCKRANK2(factor_type,factor_name,'',0,'SW1农林牧渔')
```

## 成长因子

- **表名: `factor_growth`**

| 参数                         | 因子名称             | 因子说明                                          |
| -------------------------- | ---------------- | --------------------------------------------- |
| `fin_cash_flow_growth`     | 筹资活动产生的现金流量净额增长率 | 反映公司通过筹资活动（如发行股票、债券等）获得的现金流量净额的增长率，体现融资能力的提升。 |
| `net_profit_growth_parent` | 归属母公司股东的净利润增长率   | 表明公司净利润中归属母公司股东部分的增长速度，是衡量公司核心盈利能力的重要指标。      |
| `net_assets_growth`        | 净资产增长率           | 显示公司净资产（总资产减去总负债）的增长率，反映公司的资本积累和财务健康状况。       |
| `total_profit_growth`      | 利润总额增长率          | 表示公司总利润的增长率，涵盖主营业务利润和非主营业务利润，是公司整体盈利能力的标志。    |

## 基础因子

- **表名: `factor_base_derivative`**

| 参数                        | 因子名称            | 因子说明                                       |
| ------------------------- | --------------- | ------------------------------------------ |
| `fin_exp_ttm`             | 财务费用TTM         | 公司在最近十二个月内（TTM）的财务费用总额，包括利息支出等。            |
| `total_rev_ttm`           | 营业总收入TTM        | 最近十二个月内公司的营业总收入，包括主营业务收入和其它业务收入。           |
| `admin_exp_ttm`           | 管理费用TTM         | 公司在最近十二个月内管理活动所产生的费用总额。                    |
| `net_profit_attr_shr_ttm` | 归属于母公司股东的净利润TTM | 最近十二个月内归属于母公司股东的净利润总额。                     |
| `net_profit_ttm`          | 净利润TTM          | 公司在最近十二个月内的净利润总额。                          |
| `op_rev_ttm`              | 营业收入TTM         | 公司在最近十二个月内的主营业务收入总额。                       |
| `op_cost_ttm`             | 营业成本TTM         | 公司在最近十二个月内的主营业务成本总额。                       |
| `op_profit_ttm`           | 营业利润TTM         | 公司在最近十二个月内的营业利润，即营业收入减去营业成本和期间费用后的利润。      |
| `non_op_inc_ttm`          | 营业外收入TTM        | 公司在最近十二个月内与主营业务无关的收入总额。                    |
| `non_op_exp_ttm`          | 营业外支出TTM        | 公司在最近十二个月内与主营业务无关的支出总额。                    |
| `non_op_net_inc_ttm`      | 营业外收支净额TTM      | 公司在最近十二个月内营业外收入减去营业外支出的净额。                 |
| `total_profit_ttm`        | 利润总额TTM         | 公司在最近十二个月内的总利润，包括营业利润和非营业利润。               |
| `net_debt`                | 净债务             | 公司的总负债减去其现金和现金等价物的余额。                      |
| `ret_earnings`            | 留存收益            | 公司在最近十二个月内累积的未分配利润。                        |
| `net_wc`                  | 净运营资本           | 公司的流动资产减去流动负债，反映公司短期偿债能力。                  |
| `fin_cash_flow_ttm`       | 筹资活动现金流量净额TTM   | 最近十二个月内公司通过筹资活动产生的现金流量净额，包括借款、发行股票等活动。     |
| `op_cash_flow_ttm`        | 经营活动现金流量净额TTM   |                                            |
| `impair_loss_ttm`         | 资产减值损失TTM       | 最近十二个月内公司因资产价值下降而确认的损失总额。                  |
| `cf_mv_ratio`             | 现金流市值比          | 公司的经营现金流与市值的比例，反映公司现金流的充足度以及市场对其价值的评估是否合理。 |
| `circ_market_value`       | 流通市值            | 公司已发行在外且可自由交易的股票的总市值。                      |

## 每股因子

- **表名: `factor_metrics`**

| 参数                    | 因子名称            | 因子说明                                          |
| --------------------- | --------------- | --------------------------------------------- |
| `total_mv`            | 总市值             | 公司的总市值除以其总股本，反映每股的市场价值。                       |
| `op_cash_flow_ps`     | 每股经营活动产生的现金流量净额 | 公司经营活动产生的现金流量净额除以总股本，反映每股的现金生成能力。             |
| `net_assets_ps`       | 每股净资产           | 公司的净资产除以总股本，反映每股拥有的资产净值。                      |
| `ret_earnings_ps`     | 每股留存收益          | 公司累积的未分配利润除以总股本，反映每股积累的未分配利润。                 |
| `eps_ttm`             | 每股收益TTM         | 公司最近十二个月（TTM）的净利润除以总股本，反映每股的盈利水平。             |
| `undist_profit_ps`    | 每股未分配利润         | 公司未分配利润除以总股本，反映每股可供分配的利润。                     |
| `cash_equiv_ps`       | 每股现金及现金等价物余额    | 公司持有的现金及现金等价物除以总股本，反映每股的现金持有量。                |
| `op_profit_ps_ttm`    | 每股营业利润TTM       | 公司最近十二个月（TTM）的营业利润除以总股本，反映每股的营业盈利能力。          |
| `op_revenue_ps`       | 每股营业收入          | 公司的营业收入除以总股本，反映每股的销售收入。                       |
| `op_revenue_ps_ttm`   | 每股营业收入TTM       | 公司最近十二个月（TTM）的营业收入除以总股本，反映每股的销售收入水平。          |
| `total_op_revenue_ps` | 每股营业总收入         | 公司的营业总收入除以总股本，反映每股的总销售收入。                     |
| `pb_ratio`            | 市净率             | 公司的股价除以每股净资产，反映市场对公司每股净资产的估值倍数。               |
| `cap_reserve_ps`      | 每股资本公积金         | 公司的资本公积金除以总股本，反映每股的资本公积水平，资本公积金通常用于转增股本或弥补亏损。 |

## 质量因子

- **表名: `factor_quality`**

| 参数                                           | 因子名称                    | 因子说明                                   |
| -------------------------------------------- | ----------------------- | -------------------------------------- |
| `eq_ratio`                                   | 产权比率                    | 公司负债总额与股东权益的比率，反映公司的资本结构和财务杠杆程度。       |
| `non_curr_assets_ratio`                      | 非流动资产比率                 | 非流动资产占总资产的比例，反映公司长期投资的比重。              |
| `sh_eq_ratio`                                | 股东权益比率                  | 股东权益占总资产的比例，反映公司自有资本的比重。               |
| `fin_exp_to_rev_ratio`                       | 财务费用与营业总收入之比            | 财务费用占营业总收入的比例，反映财务成本对收入的影响。            |
| `eq_to_fixed_assets_ratio`                   | 股东权益与固定资产比率             | 股东权益与固定资产的比率，反映固定资产的资金来源情况。            |
| `op_cash_flow_to_tot_liab_ratio`             | 经营活动产生的现金流量净额与负债合计比率    | 经营活动现金流量净额与负债总额的比率，反映公司偿还债务的能力。        |
| `op_cash_flow_to_rev_ratio`                  | 经营活动产生的现金流量净额与营业收入之比    | 经营活动现金流量净额与营业收入的比率，反映经营现金的效率。          |
| `op_cash_flow_to_enterprise_value_ratio_ttm` | 经营活动产生的现金流量净额与企业价值之比TTM | 经营活动现金流量净额与企业价值的比率，反映现金流量对整个企业价值的贡献。   |
| `op_cash_flow_growth_rate`                   | 经营活动产生的现金流量净额增长率        | 经营活动现金流量净额的增长率，反映经营现金流的变动趋势。           |
| `cash_to_liab_ratio`                         | 现金流动负债比                 | 现金及现金等价物与流动负债的比率，反映短期偿债能力。             |
| `cash_flow_to_assets_ROA_diff`               | 现金流资产比和资产回报率之差          | 现金流与资产总额的比率减去资产回报率，反映现金流与资产回报之间的差异。    |
| `debt_to_tot_assets_ratio`                   | 债务总资产比                  | 总债务与总资产的比率，反映公司的债务负担程度。                |
| `lt_debt_to_wc_ratio`                        | 长期负债与营运资金比率             | 长期负债与营运资金（流动资产-流动负债）的比率，反映长期债务对流动性的压力。 |
| `lt_debt_to_tot_assets_ratio`                | 长期负债与资产总计之比             | 长期负债与总资产的比率，反映长期债务在总资产中的比重。            |
| `lt_borrowings_to_tot_assets_ratio`          | 长期借款与资产总计之比             | 长期借款与总资产的比率，反映长期借款对总资产的影响。             |
| `tot_asset_cash_recovery_ratio`              | 总资产现金回收率                | 经营活动现金流入与总资产的比率，反映资产转换成现金的能力。          |
| `op_cash_flow_to_net_debt_ratio`             | 经营活动产生现金流量净额与净债务比率      | 经营活动现金流量净额与净债务的比率，反映偿还净债务的能力。          |
| `net_profit_margin_on_sales`                 | 销售净利率                   | 净利润与销售收入的比率，反映销售收入转化为净利润的效率。           |
| `inventory_turnover_ratio`                   | 存货周转率                   | 销售成本与平均存货的比率，反映存货的周转速度。                |
| `days_sales_of_inventory`                    | 存货周转天数                  | 平均存货转化为销售所需的时间，反映存货的流动性。               |
| `net_profit_cash_content`                    | 净利润现金含量                 | 经营活动现金流量净额与净利润的比率，反映净利润的质量。            |
| `days_sales_outstanding`                     | 应收账款周转天数                | 平均应收账款转化为现金所需的时间，反映应收账款的回收速度。          |
| `AR_turnover_ratio`                          | 应收账款周转率                 | 营业收入与平均应收账款的比率，反映应收账款的周转速度。            |
| `net_profit_after_extra_to_profit_ratio`     | 扣除非经常损益后的净利润与利润总额之比     | 扣除非经常性损益后的净利润与利润总额的比率，反映主营业务的盈利质量。     |
| `admin_exp_to_rev_ratio`                     | 管理费用与营业总收入之比            | 管理费用占营业总收入的比例，反映管理成本的效率。               |
| `cash_ratio`                                 | 现金比率                    | 现金及现金等价物与流动负债的比率，反映即时偿债能力。             |
| `curr_assets_turnover_ratio_ttm`             | 流动资产周转率TTM              | 流动资产与销售收入的比率，反映流动资产的使用效率。              |
| `current_ratio`                              | 流动比率                    | 流动资产与流动负债的比率，反映短期偿债能力。                 |
| `tangible_net_worth_to_debt_ratio`           | 有形净值债务率                 | 负债总额与扣除无形资产后的股东权益的比率，反映有形资产的债务负担。      |
| `gross_profit_margin_growth_rate`            | 毛利率增长                   | 毛利率的变化率，反映产品盈利能力的变化趋势。                 |
| `AR_index`                                   | 应收账款指数                  | 应收账款相对于营业收入的变化率，反映应收账款管理的效率。           |
| `sh_eq_turnover_ratio`                       | 股东权益周转率                 | 营业收入与股东权益的比率，反映股东权益的周转速度。              |

## 动量因子

- **表名: `factor_momentum`**

| 参数                  | 因子名称                           | 因子说明                |
| ------------------- | ------------------------------ | ------------------- |
| `aroon_up`          | Aroon指标上轨，反映价格上升的趋势强度。         |                     |
| `aroon_down`        | Aroon指标下轨                      | 反映价格下降的趋势强度。        |
| `bbic`              | BBI动量                          | 基于多条均线的综合指标，反映价格动量。 |
| `bear_power`        | 空头力道                           | 反映市场下跌趋势的力量。        |
| `bias5`             | 5日乖离率                          | 反映短期价格偏离均线的程度。      |
| `bias10`            | 10日乖离率                         | 反映中期价格偏离均线的程度。      |
| `bias20`            | 20日乖离率                         | 反映长期价格偏离均线的程度。      |
| `bias60`            | 60日乖离率                         | 反映超长期价格偏离均线的程度。     |
| `bull_power`        | 多头力道                           | 反映市场上升趋势的力量。        |
| `cci10`             | 10日顺势指标                        | 衡量价格偏离其统计平均值的程度。    |
| `cci15`             | 15日顺势指标                        | 衡量价格偏离其统计平均值的程度。    |
| `cci20`             | 20日顺势指标                        | 衡量价格偏离其统计平均值的程度。    |
| `cci88`             | 88日顺势指标                        | 衡量价格偏离其统计平均值的程度。    |
| `cr20`              | CR指标                           | 反映多空双方力量对比。         |
| `mass`              | 梅斯线                            | 反映价格趋势的强度和稳定性。      |
| `plrc6`             | 6日收盘价格与日期线性回归系数                | 反映短期价格趋势。           |
| `plrc12`            | 12日收盘价格与日期线性回归系数               | 反映中期价格趋势。           |
| `plrc24`            | 24日收盘价格与日期线性回归系数               | 反映长期价格趋势。           |
| `price1m`           | 当前股价除以过去一个月股价均值再减1             | 反映近期动量。             |
| `price3m`           | 当前股价除以过去三个月股价均值再减1             | 反映中期动量。             |
| `price1y`           | 当前股价除以过去一年股价均值再减1              | 反映长期动量。             |
| `roc12`             | 12日变动速率(Price Rate of Change)  | 反映价格变化率。            |
| `roc120`            | 120日变动速率(Price Rate of Change) | 反映价格变化率。            |
| `roc6`              | 6日变动速率(Price Rate of Change)   | 反映价格变化率。            |
| `roc60`             | 60日变动速率(Price Rate of Change)  | 反映价格变化率。            |
| `single_day_vpt`    | 单日价量趋势                         | 反映价格和成交量的关系。        |
| `single_day_vpt_12` | 单日价量趋势12均值                     | 反映中期价量趋势的平均。        |
| `single_day_vpt_6`  | 单日价量趋势6日均值                     | 反映短期价量趋势的平均。        |
| `trix10`            | 10日终极指标TRIX                    | 反映价格变化的加速度。         |
| `trix5`             | 5日终极指标TRIX                     | 反映价格变化的加速度。         |

## 风险因子

- **表名: `factor_risk`**

| 参数                 | 因子名称        | 因子说明                |
| ------------------ | ----------- | ------------------- |
| `variance20`       | 20日年化收益方差   | 衡量短期内投资回报的波动程度。     |
| `skewness_20`      | 个股收益的20日偏度  | 反映收益分布的不对称性。        |
| `kurtosis_20`      | 个股收益的20日峰度  | 反映收益分布的尖峭程度或尾部厚度。   |
| `sharpe_ratio_20`  | 20日夏普比率     | 衡量每单位风险所获得的超额回报。    |
| `variance60`       | 60日年化收益方差   | 衡量中期投资回报的波动程度。      |
| `skewness_60`      | 个股收益的60日偏度  | 反映中期收益分布的不对称性。      |
| `kurtosis_60`      | 个股收益的60日峰度  | 反映中期收益分布的尖峭程度或尾部厚度。 |
| `sharpe_ratio_60`  | 60日夏普比率     | 衡量中期每单位风险所获得的超额回报。  |
| `variance120`      | 120日年化收益方差  | 衡量长期投资回报的波动程度。      |
| `skewness_120`     | 个股收益的120日偏度 | 反映长期收益分布的不对称性。      |
| `kurtosis_120`     | 个股收益的120日峰度 | 反映长期收益分布的尖峭程度或尾部厚度。 |
| `sharpe_ratio_120` | 120日夏普比率    | 衡量长期每单位风险所获得的超额回报。  |

## 技术因子

- **表名: `factor_technical`**

| 参数          | 因子名称       | 因子说明                |
| ----------- | ---------- | ------------------- |
| `boll_down` | 下轨线（布林线）指标 | 反映价格的下限支撑位。         |
| `boll_up`   | 上轨线（布林线）指标 | 反映价格的上限阻力位。         |
| `emac5`     | 5日指数移动均线   | 反映短期价格趋势。           |
| `emac10`    | 10日指数移动均线  | 反映中期价格趋势。           |
| `emac12`    | 12日指数移动均线  | 用于MACD计算。           |
| `emac20`    | 20日指数移动均线  | 反映中长期价格趋势。          |
| `emac26`    | 26日指数移动均线  | 用于MACD计算。           |
| `emac120`   | 120日指数移动均线 | 反映长期价格趋势。           |
| `mac5`      | 5日移动均线     | 反映短期价格趋势。           |
| `mac10`     | 10日移动均线    | 反映中期价格趋势。           |
| `mac12`     | 12日移动均线    | 用于某些技术分析策略。         |
| `mac20`     | 20日移动均线    | 反映中长期价格趋势。          |
| `mac26`     | 26日移动均线    | 用于某些技术分析策略。         |
| `mac120`    | 120日移动均线   | 反映长期价格趋势。           |
| `macdc`     | 平滑异同移动平均线  | 通过比较两条移动均线的差值来预测趋势。 |
| `mfi`       | 资金流量指标     | 衡量资金进出市场的强度。        |

## 情绪因子

- **表名: `factor_sentiment`**

| 参数              | 因子名称         | 因子说明                         |
| --------------- | ------------ | ---------------------------- |
| `vroc12`        | 12日成交量变动速率   | 反映成交量变化的速度。                  |
| `tvma6`         | 6日成交量加权移动均线  | 反映短期成交量的平均趋势。                |
| `vema10`        | 10日成交量指数移动均线 | 反映中期成交量的平滑趋势。                |
| `vol5`          | 5日成交量均值      | 反映短期平均成交量。                   |
| `vema12`        | 12日成交量指数移动均线 | 反映成交量的中期趋势。                  |
| `tvma20`        | 20日成交量加权移动均线 | 反映中长期成交量的平均趋势。               |
| `davol5`        | 5日成交量偏差      | 反映成交量与均值的偏离程度。               |
| `wvad`          | 威廉变异离散量      | 反映价格与成交量的同步变化。               |
| `mawvad`        | 移动平均威廉变异离散量  | 反映价格与成交量的平滑同步变化。             |
| `vstd10`        | 10日成交量标准差    | 反映成交量的波动性。                   |
| `atr14`         | 14日平均真实波幅    | 反映价格波动的幅度。                   |
| `vol10`         | 10日成交量均值     | 反映中期平均成交量。                   |
| `davol10`       | 10日成交量偏差     | 反映成交量与均值的偏离程度。               |
| `vstd20`        | 20日成交量标准差    | 反映成交量的波动性。                   |
| `atr6`          | 6日平均真实波幅     | 反映短期价格波动的幅度。                 |
| `vol20`         | 20日成交量均值     | 反映中长期平均成交量。                  |
| `davol20`       | 20日成交量偏差     | 反映成交量与均值的偏离程度。               |
| `vdiff`         | 成交量差值        | 反映成交量的瞬时变化。                  |
| `vdea`          | 成交量差指数移动平均线  | 反映成交量差值的平滑趋势。                |
| `vmacd`         | 成交量MACD      | 通过比较不同周期的成交量移动平均线差值来识别买卖信号。  |
| `br`            | 买盘力道         | 反映买盘成交量的强度。                  |
| `ar`            | 卖盘力道         | 反映卖盘成交量的强度。                  |
| `vol60`         | 60日成交量均值     | 反映长期平均成交量。                   |
| `vol120`        | 120日成交量均值    | 反映超长期平均成交量。                  |
| `vroc6`         | 6日成交量变动速率    | 反映成交量变化的速度。                  |
| `tvstd20`       | 20日成交量加权标准差  | 反映成交量的波动性。                   |
| `arbr`          | 买卖盘力道比       | 反映买卖盘强度的对比。                  |
| `money_flow_20` | 20日资金流向      | 反映资金进出市场的趋势。                 |
| `vema5`         | 5日成交量指数移动均线  | 反映短期成交量的平滑趋势。                |
| `vol240`        | 240日成交量均值    | 反映极长期平均成交量。                  |
| `vema26`        | 26日成交量指数移动均线 | 反映成交量的长期趋势。                  |
| `vosc`          | 量能震荡指标       | 反映成交量的波动趋势。                  |
| `tvstd6`        | 6日成交量加权标准差   | 反映成交量的短期波动性。                 |
| `psy`           | 心理线          | 反映股票上涨天数占比，用以判断市场情绪的超买或超卖状态。 |
